/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,d){function c(e){a.extend(true,cb,e)}function b(e,j,h){function p(){e.addClass("fc");j.isRTL&&e.addClass("fc-rtl");j.theme&&e.addClass("ui-widget");B=a("<div class='fc-content' style='position:relative'/>").prependTo(e);ba=new f(ca,j);(l=ba.render())&&e.prepend(l);A(j.defaultView);a(window).resize(G);a("body")[0].offsetWidth!==0||o();var u=a(".fc-view-"+j.defaultView,e).height();setTimeout(function(){a(".fc-view-search",e).css("height",u).hide()},200)}function o(){setTimeout(function(){!v.start&&
a("body")[0].offsetWidth!==0&&w()},0)}function A(u){if(!v||u!=v.name){oa++;ta();var O=v,X;if(O){(O.beforeHide||nb)();db(B,B.height());O.element.hide()}else db(B,1);B.css("overflow","hidden");if(v=R[u])v.element.show();else v=R[u]=new Ua[u](X=ya=a("<div class='fc-view fc-view-"+u+"' style='position:absolute'/>").appendTo(B),ca);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");O&&ba.deactivateButton(O.name);ba.activateButton(u);w();B.css("overflow","");O&&db(B,1);
X||(v.afterShow||nb)();oa--}}function w(u){if(P.offsetWidth!==0){oa++;ta();xa===d&&H();var O=false;if(!v.start||u||ja<v.start||ja>=v.end){v.render(ja,u||0);M(true);O=true}else if(v.sizeDirty){v.clearEvents();M();O=true}else if(v.eventsDirty){v.clearEvents();O=true}v.sizeDirty=false;v.eventsDirty=false;u=O;if(!j.lazyFetching||U(v.visStart,v.visEnd))fa();else u&&ka();pa=e.outerWidth();ba.updateTitle(v.title);u=new Date;u>=v.start&&u<v.end?ba.disableButton("today"):ba.enableButton("today");oa--;v.trigger("viewDisplay",
P)}}function r(){s();if(P.offsetWidth!==0){H();M();ta();v.clearEvents();v.renderEvents(ua);v.sizeDirty=false}}function s(){a.each(R,function(u,O){O.sizeDirty=true})}function H(){xa=j.contentHeight?j.contentHeight:j.height?j.height-(l?l.height():0)-$a(B):Math.round(B.width()/Math.max(j.aspectRatio,0.5))}function M(u){oa++;v.setHeight(xa,u);if(ya){ya.css("position","relative");ya=null}v.setWidth(B.width(),u);oa--}function G(){if(!oa)if(v.start){var u=++Ba;setTimeout(function(){if(u==Ba&&!oa&&P.offsetWidth!==
0)if(pa!=(pa=e.outerWidth())){oa++;r();v.trigger("windowResize",P);oa--}},200)}else o()}function fa(){K(v.visStart,v.visEnd)}function ka(u){ga();if(P.offsetWidth!==0){v.clearEvents();v.renderEvents(ua,u);v.eventsDirty=false}}function ga(){a.each(R,function(u,O){O.eventsDirty=true})}function ta(){v&&v.unselect()}var ca=this;ca.options=j;ca.render=function(u){if(B){H();s();ga();w(u)}else p()};ca.destroy=function(){a(window).unbind("resize",G);ba.destroy();B.remove();e.removeClass("fc fc-rtl ui-widget")};
ca.refetchEvents=fa;ca.reportEvents=function(u){ua=u;ka()};ca.reportEventChange=function(u){ka(u)};ca.rerenderEvents=ka;ca.changeView=A;ca.select=function(u,O,X){v.select(u,O,X===d?true:X)};ca.unselect=ta;ca.prev=function(){w(-1)};ca.next=function(){w(1)};ca.prevYear=function(){i(ja,-1);w()};ca.nextYear=function(){i(ja,1);w()};ca.today=function(){ja=new Date;w()};ca.gotoDate=function(u,O,X){if(u instanceof Date)ja=m(u);else Z(ja,u,O,X);w()};ca.incrementDate=function(u,O,X){u!==d&&i(ja,u);O!==d&&n(ja,
O);X!==d&&k(ja,X);w()};ca.formatDate=function(u,O){return Fa(u,O,j)};ca.formatDates=function(u,O,X){return Pa(u,O,X,j)};ca.getDate=function(){return m(ja)};ca.getView=function(){return v};ca.option=function(u,O){if(O===d)return j[u];if(u=="height"||u=="contentHeight"||u=="aspectRatio"){j[u]=O;r()}};ca.trigger=function(u,O){if(j[u])return j[u].apply(O||P,Array.prototype.slice.call(arguments,2))};g.call(ca,j,h);var U=ca.isFetchNeeded,K=ca.fetchEvents,P=e[0],ba,l,B,v,R={},pa,xa,ya,Ba=0,oa=0,ja=new Date,
ua=[],Ca;Z(ja,j.year,j.month,j.date);j.droppable&&a(document).bind("dragstart",function(u,O){var X=u.target,da=a(X);if(!da.parents(".fc").length){var T=j.dropAccept;if(a.isFunction(T)?T.call(X,da):da.is(T)){Ca=X;v.dragStart(Ca,u,O)}}}).bind("dragstop",function(u,O){if(Ca){v.dragStop(Ca,u,O);Ca=null}})}function f(e,j){function h(A){var w=a("<td class='fc-header-"+A+"'/>");(A=j.header[A])&&a.each(A.split(" "),function(r){r>0&&w.append("<span class='fc-header-space'/>");var s;a.each(this.split(","),
function(H,M){if(M=="title"){w.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");s&&s.addClass(o+"-corner-right");s=null}else{var G;if(e[M])G=e[M];else if(Ua[M])G=function(){ga.removeClass(o+"-state-hover");e.changeView(M)};if(G){var fa=j.theme?ib(j.buttonIcons,M):null,ka=ib(j.buttonText,M),ga=a("<span class='fc-button fc-button-"+M+" "+o+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(fa?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+fa+
"'/></span>":ka)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(ga){ga.click(function(){ga.hasClass(o+"-state-disabled")||G()}).mousedown(function(){ga.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){ga.removeClass(o+"-state-down")}).hover(function(){ga.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){ga.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(w);
s||ga.addClass(o+"-corner-left");s=ga}}}});s&&s.addClass(o+"-corner-right")});return w}this.render=function(){o=j.theme?"ui":"fc";if(j.header)return p=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(h("left")).append(h("center")).append(h("right")))};this.destroy=function(){p.remove()};this.updateTitle=function(A){p.find("h2").html(A)};this.activateButton=function(A){p.find("span.fc-button-"+A).addClass(o+"-state-active")};this.deactivateButton=function(A){p.find("span.fc-button-"+
A).removeClass(o+"-state-active")};this.disableButton=function(A){p.find("span.fc-button-"+A).addClass(o+"-state-disabled")};this.enableButton=function(A){p.find("span.fc-button-"+A).removeClass(o+"-state-disabled")};var p=a([]),o}function g(e,j){function h(l,B){p(l,function(v){if(B==ca){if(v){for(var R=0;R<v.length;R++){v[R].source=l;r(v[R])}P=P.concat(v)}U--;U||G(P)}})}function p(l,B){var v,R=Ka.sourceFetchers,pa;for(v=0;v<R.length;v++){pa=R[v](l,ga,ta,B);if(pa===true)return;else if(typeof pa==
"object"){p(pa,B);return}}if(v=l.events)if(a.isFunction(v)){A();v(m(ga),m(ta),function(oa){B(oa);w()})}else a.isArray(v)?B(v):B();else if(l.url){var xa=l.success,ya=l.error,Ba=l.complete;v=a.extend({},l.data||{});R=ab(l.startParam,e.startParam);pa=ab(l.endParam,e.endParam);if(R)v[R]=Math.round(+ga/1E3);if(pa)v[pa]=Math.round(+ta/1E3);A();a.ajax(a.extend({},Gb,l,{data:v,success:function(oa){oa=oa||[];var ja=eb(xa,this,arguments);if(a.isArray(ja))oa=ja;B(oa)},error:function(){eb(ya,this,arguments);
B()},complete:function(){eb(Ba,this,arguments);w()}}))}else B()}function o(l){if(a.isFunction(l)||a.isArray(l))l={events:l};else if(typeof l=="string")l={url:l};if(typeof l=="object"){var B=l;if(B.className){if(typeof B.className=="string")B.className=B.className.split(/\s+/)}else B.className=[];for(var v=Ka.sourceNormalizers,R=0;R<v.length;R++)v[R](B);ka.push(l);return l}}function A(){K++||H("loading",null,true)}function w(){--K||H("loading",null,false)}function r(l){var B=l.source||{},v=ab(B.ignoreTimezone,
e.ignoreTimezone);l._id=l._id||(l.id===d?"_fc"+Hb++:l.id+"");if(l.date){if(!l.start)l.start=l.date;delete l.date}l._start=m(l.start=$(l.start,v));l.end=$(l.end,v);if(l.end&&l.end<=l.start)l.end=null;l._end=l.end?m(l.end):null;if(l.allDay===d)l.allDay=ab(B.allDayDefault,e.allDayDefault);if(l.className){if(typeof l.className=="string")l.className=l.className.split(/\s+/)}else l.className=[]}function s(l){return(typeof l=="object"?l.events||l.url:"")||l}this.isFetchNeeded=function(l,B){return!ga||l<
ga||B>ta};this.fetchEvents=function(l,B){ga=l;ta=B;P=[];var v=++ca,R=ka.length;U=R;for(var pa=0;pa<R;pa++)h(ka[pa],v)};this.addEventSource=function(l){if(l=o(l)){U++;h(l,ca)}};this.removeEventSource=function(l){ka=a.grep(ka,function(B){return!(B&&l&&s(B)==s(l))});P=a.grep(P,function(B){return!(B.source&&l&&s(B.source)==s(l))});G(P)};this.updateEvent=function(l){var B,v=P.length,R,pa=M().defaultEventEnd,xa=l.start-l._start,ya=l.end?l.end-(l._end||pa(l)):0;for(B=0;B<v;B++){R=P[B];if(R._id==l._id&&R!=
l){R.start=new Date(+R.start+xa);R.end=l.end?R.end?new Date(+R.end+ya):new Date(+pa(R)+ya):null;R.title=l.title;R.url=l.url;R.allDay=l.allDay;R.className=l.className;R.editable=l.editable;R.color=l.color;R.backgroudColor=l.backgroudColor;R.borderColor=l.borderColor;R.textColor=l.textColor;r(R)}}r(l);G(P)};this.renderEvent=function(l,B){r(l);if(!l.source){if(B){fa.events.push(l);l.source=fa}P.push(l)}G(P)};this.removeEvents=function(l){if(l){if(!a.isFunction(l)){var B=l+"";l=function(R){return R._id==
B}}P=a.grep(P,l,true);for(v=0;v<ka.length;v++)if(a.isArray(ka[v].events))ka[v].events=a.grep(ka[v].events,l,true)}else{P=[];for(var v=0;v<ka.length;v++)if(a.isArray(ka[v].events))ka[v].events=[]}G(P)};this.clientEvents=function(l){if(a.isFunction(l))return a.grep(P,l);else if(l){l+="";return a.grep(P,function(B){return B._id==l})}return P};this.normalizeEvent=r;for(var H=this.trigger,M=this.getView,G=this.reportEvents,fa={events:[]},ka=[fa],ga,ta,ca=0,U=0,K=0,P=[],ba=0;ba<j.length;ba++)o(j[ba])}function i(e,
j,h){e.setFullYear(e.getFullYear()+j);h||D(e);return e}function n(e,j,h){if(+e){j=e.getMonth()+j;var p=m(e);p.setDate(1);p.setMonth(j);e.setMonth(j);for(h||D(e);e.getMonth()!=p.getMonth();)e.setDate(e.getDate()+(e<p?1:-1))}return e}function k(e,j,h){if(+e){j=e.getDate()+j;var p=m(e);p.setHours(9);p.setDate(j);e.setDate(j);h||D(e);I(e,p)}return e}function I(e,j){if(+e)for(;e.getDate()!=j.getDate();)e.setTime(+e+(e<j?1:-1)*Ib)}function q(e,j){e.setMinutes(e.getMinutes()+j);return e}function D(e){e.setHours(0);
e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}function m(e,j){if(j)return D(new Date(+e));return new Date(+e)}function E(){var e=0,j;do j=new Date(1970,e++,1);while(j.getHours());return j}function F(e,j,h){for(j=j||1;!e.getDay()||h&&e.getDay()==1||!h&&e.getDay()==6;)k(e,j);return e}function V(e,j){return Math.round((m(e,true)-m(j,true))/ob)}function Z(e,j,h,p){if(j!==d&&j!=e.getFullYear()){e.setDate(1);e.setMonth(0);e.setFullYear(j)}if(h!==d&&h!=e.getMonth()){e.setDate(1);e.setMonth(h)}p!==
d&&e.setDate(p)}function $(e,j){if(typeof e=="object")return e;if(typeof e=="number")return new Date(e*1E3);if(typeof e=="string"){if(e.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(e)*1E3);if(j===d)j=true;return Aa(e,j)||(e?new Date(e):null)}return null}function Aa(e,j){var h=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!h)return null;var p=new Date(h[1],0,1);if(j||!h[14]){var o=new Date(h[1],
0,1,9,0);if(h[3]){p.setMonth(h[3]-1);o.setMonth(h[3]-1)}if(h[5]){p.setDate(h[5]);o.setDate(h[5])}I(p,o);h[7]&&p.setHours(h[7]);h[8]&&p.setMinutes(h[8]);h[10]&&p.setSeconds(h[10]);h[12]&&p.setMilliseconds(Number("0."+h[12])*1E3);I(p,o)}else{p.setUTCFullYear(h[1],h[3]?h[3]-1:0,h[5]||1);p.setUTCHours(h[7]||0,h[8]||0,h[10]||0,h[12]?Number("0."+h[12])*1E3:0);o=Number(h[16])*60+(h[18]?Number(h[18]):0);o*=h[15]=="-"?1:-1;p=new Date(+p+o*6E4)}return p}function Da(e){if(typeof e=="number")return e*60;if(typeof e==
"object")return e.getHours()*60+e.getMinutes();if(e=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var j=parseInt(e[1],10);if(e[3]){j%=12;if(e[3].toLowerCase().charAt(0)=="p")j+=12}return j*60+(e[2]?parseInt(e[2],10):0)}}function Fa(e,j,h){return Pa(e,null,j,h)}function Pa(e,j,h,p){p=p||cb;var o=e,A=j,w,r=h.length,s,H,M,G="";for(w=0;w<r;w++){s=h.charAt(w);if(s=="'")for(H=w+1;H<r;H++){if(h.charAt(H)=="'"){if(o){G+=H==w+1?"'":h.substring(w+1,H);w=H}break}}else if(s=="(")for(H=w+1;H<r;H++){if(h.charAt(H)==")"){w=
Fa(o,h.substring(w+1,H),p);if(parseInt(w.replace(/\D/,""),10))G+=w;w=H;break}}else if(s=="[")for(H=w+1;H<r;H++){if(h.charAt(H)=="]"){s=h.substring(w+1,H);w=Fa(o,s,p);if(w!=Fa(A,s,p))G+=w;w=H;break}}else if(s=="{"){o=j;A=e}else if(s=="}"){o=e;A=j}else{for(H=r;H>w;H--)if(M=Jb[h.substring(w,H)]){if(o)G+=M(o,p);w=H-1;break}if(H==w)if(o)G+=s}}return G}function Ia(e){var j;if(e.end){j=e.end;e=e.allDay;j=m(j);j=e||j.getHours()||j.getMinutes()?k(j,1):D(j)}else j=k(m(e.start),1);return j}function Va(e,j){return(j.msLength-
e.msLength)*100+(e.event.start-j.event.start)}function bb(e,j,h,p){var o=[],A,w=e.length,r,s,H,M,G;for(A=0;A<w;A++){r=e[A];s=r.start;H=j[A];if(H>h&&s<p){if(s<h){s=m(h);M=false}else M=true;if(H>p){H=m(p);G=false}else G=true;o.push({event:r,start:s,end:H,isStart:M,isEnd:G,msLength:H-s})}}return o.sort(Va)}function Qa(e){var j=[],h,p=e.length,o,A,w,r;for(h=0;h<p;h++){o=e[h];for(A=0;;){w=false;if(j[A])for(r=0;r<j[A].length;r++)if(j[A][r].end>o.start&&j[A][r].start<o.end){w=true;break}if(w)A++;else break}if(j[A])j[A].push(o);
else j[A]=[o]}return j}function La(e,j,h){e.unbind("mouseover").mouseover(function(p){for(var o=p.target,A;o!=this;){A=o;o=o.parentNode}if((o=A._fci)!==d){A._fci=d;A=j[o];h(A.event,A.element,A);a(p.target).trigger(p)}p.stopPropagation()})}function Ra(e,j,h){for(var p=0,o;p<e.length;p++){o=a(e[p]);o.width(Math.max(0,j-jb(o,h)))}}function Xa(e,j,h){for(var p=0,o;p<e.length;p++){o=a(e[p]);o.height(Math.max(0,j-$a(o,h)))}}function jb(e,j){return(parseFloat(a.curCSS(e[0],"paddingLeft",true))||0)+(parseFloat(a.curCSS(e[0],
"paddingRight",true))||0)+((parseFloat(a.curCSS(e[0],"borderLeftWidth",true))||0)+(parseFloat(a.curCSS(e[0],"borderRightWidth",true))||0))+(j?(parseFloat(a.curCSS(e[0],"marginLeft",true))||0)+(parseFloat(a.curCSS(e[0],"marginRight",true))||0):0)}function $a(e,j){return(parseFloat(a.curCSS(e[0],"paddingTop",true))||0)+(parseFloat(a.curCSS(e[0],"paddingBottom",true))||0)+((parseFloat(a.curCSS(e[0],"borderTopWidth",true))||0)+(parseFloat(a.curCSS(e[0],"borderBottomWidth",true))||0))+(j?pb(e):0)}function pb(e){return(parseFloat(a.curCSS(e[0],
"marginTop",true))||0)+(parseFloat(a.curCSS(e[0],"marginBottom",true))||0)}function db(e,j){j=typeof j=="number"?j+"px":j;e.each(function(h,p){p.style.cssText+=";min-height:"+j+";_height:"+j})}function nb(){}function qb(e,j){return e-j}function Ya(e){return(e<10?"0":"")+e}function ib(e,j){if(e[j]!==d)return e[j];for(var h=j.split(/(?=[A-Z])/),p=h.length-1,o;p>=0;p--){o=e[h[p].toLowerCase()];if(o!==d)return o}return e[""]}function Za(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function rb(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function kb(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function fb(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function lb(e,j){e.each(function(h,
p){p.className=p.className.replace(/^fc-\w*/,"fc-"+Kb[j.getDay()])})}function sb(e,j){var h=e.source||{},p=e.color,o=h.color,A=j("eventColor"),w=e.backgroundColor||p||h.backgroundColor||o||j("eventBackgroundColor")||A;p=e.borderColor||p||h.borderColor||o||j("eventBorderColor")||A;h=e.textColor||h.textColor||j("eventTextColor");o=[];w&&o.push("background-color:"+w);p&&o.push("border-color:"+p);h&&o.push("color:"+h);return o.join(";")}function eb(e,j,h){if(a.isFunction(e))e=[e];if(e){var p,o;for(p=
0;p<e.length;p++)o=e[p].apply(j,h)||o;return o}}function ab(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==d)return arguments[e]}function mb(e,j,h){function p(t){var L=t||ja==1,x=G.start.getMonth(),z=D(new Date),Q,J,W;L&&ba.each(function(ia,na){Q=a(na);J=H(ia);Q.html(K(J,y));lb(Q,J)});v.each(function(ia,na){Q=a(na);J=H(ia);J.getMonth()==x?Q.removeClass("fc-other-month"):Q.addClass("fc-other-month");+J==+z?Q.addClass(aa+"-state-highlight fc-today"):Q.removeClass(aa+"-state-highlight fc-today");
Q.find("div.fc-day-number").text(J.getDate());L&&lb(Q,J)});B.each(function(ia,na){W=a(na);if(ia<ja){W.show();ia==ja-1?W.addClass("fc-last"):W.removeClass("fc-last")}else W.hide()})}function o(t){if(!fa("selectable")){var L=parseInt(this.className.match(/fc\-day(\d+)/)[1]);L=H(L);ka("dayClick",this,L,true,t)}}function A(t,L,x){x&&Ca.build();x=m(G.visStart);for(var z=k(m(x),ua),Q=0;Q<ja;Q++){var J=new Date(Math.max(x,t)),W=new Date(Math.min(z,L));if(J<W){var ia;if(X){ia=V(W,x)*da+T+1;J=V(J,x)*da+T+
1}else{ia=V(J,x);J=V(W,x)}w(Q,ia,Q,J-1).click(o).mousedown(U)}k(x,7);k(z,7)}}function w(t,L,x,z){t=Ca.rect(t,L,x,z,e);return ta(t,e)}function r(t){return{row:Math.floor(V(t,G.visStart)/7),col:M(t.getDay())}}function s(t){return k(m(G.visStart),t.row*7+t.col*da+T)}function H(t){return k(m(G.visStart),Math.floor(t/ua)*7+t%ua*da+T)}function M(t){return(t-Math.max(ea,ha)+ua)%ua*da+T}var G=this;G.renderBasic=function(t,L,x,z){ja=L;ua=x;if(X=fa("isRTL")){da=-1;T=ua-1}else{da=1;T=0}ea=fa("firstDay");ha=
fa("weekends")?0:1;aa=fa("theme")?"ui":"fc";y=fa("columnFormat");if(L=!l){var Q=aa+"-widget-header",J=aa+"-widget-content",W;x="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(W=0;W<ua;W++)x+="<th class='fc- "+Q+"'/>";x+="</tr></thead><tbody>";for(W=0;W<t;W++){x+="<tr class='fc-week"+W+"'>";for(Q=0;Q<ua;Q++)x+="<td class='fc- "+J+" fc-day"+(W*ua+Q)+"'><div>"+(z?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";
x+="</tr>"}x+="</tbody></table>";t=a(x).appendTo(e);P=t.find("thead");ba=P.find("th");l=t.find("tbody");B=l.find("tr");v=l.find("td");R=v.filter(":first-child");pa=B.eq(0).find("div.fc-day-content div");fb(P.add(P.find("tr")));fb(B);B.eq(0).addClass("fc-first");v.click(o).mousedown(U);xa=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}else ga();p(L)};G.setHeight=function(t){Ba=t;t=Ba-P.height();var L,x,z;if(fa("weekMode")=="variable")L=x=Math.floor(t/(ja==1?2:6));else{L=Math.floor(t/
ja);x=t-L*(ja-1)}R.each(function(Q,J){if(Q<ja){z=a(J);db(z.find("> div"),(Q==ja-1?x:L)-$a(z))}})};G.setWidth=function(t){ya=t;O.clear();oa=Math.floor(ya/ua);Ra(ba.slice(0,-1),oa)};G.renderDayOverlay=A;G.defaultSelectionEnd=function(t){return m(t)};G.renderSelection=function(t,L){A(t,k(m(L),1),true)};G.clearSelection=function(){ca()};G.reportDayClick=function(t,L,x){var z=r(t);ka("dayClick",v[z.row*ua+z.col],t,L,x)};G.dragStart=function(t,L){u.start(function(x){ca();x&&w(x.row,x.col,x.row,x.col)},
L)};G.dragStop=function(t,L,x){var z=u.stop();ca();if(z){z=s(z);ka("drop",t,z,true,L,x)}};G.defaultEventEnd=function(t){return m(t.start)};G.getHoverListener=function(){return u};G.colContentLeft=function(t){return O.left(t)};G.colContentRight=function(t){return O.right(t)};G.dayOfWeekCol=M;G.dateCell=r;G.cellDate=s;G.cellIsAllDay=function(){return true};G.allDayRow=function(t){return B.eq(t)};G.allDayBounds=function(){return{left:0,right:ya}};G.getRowCnt=function(){return ja};G.getColCnt=function(){return ua};
G.getColWidth=function(){return oa};G.getDaySegmentContainer=function(){return xa};tb.call(G,e,j,h);ub.call(G);vb.call(G);Lb.call(G);var fa=G.opt,ka=G.trigger,ga=G.clearEvents,ta=G.renderOverlay,ca=G.clearOverlays,U=G.daySelectionMousedown,K=j.formatDate,P,ba,l,B,v,R,pa,xa,ya,Ba,oa,ja,ua,Ca,u,O,X,da,T,ea,ha,aa,y;kb(e.addClass("fc-grid"));Ca=new wb(function(t,L){var x,z,Q;ba.each(function(J,W){x=a(W);z=x.offset().left;if(J)Q[1]=z;Q=[z];L[J]=Q});Q[1]=z+x.outerWidth();B.each(function(J,W){if(J<ja){x=
a(W);z=x.offset().top;if(J)Q[1]=z;Q=[z];t[J]=Q}});Q[1]=z+x.outerHeight()});u=new xb(Ca);O=new yb(function(t){return pa.eq(t)})}function Lb(){function e(l){var B=U(),v=K(),R=m(h.visStart);v=k(m(R),v);var pa=a.map(l,Ia),xa,ya,Ba,oa,ja,ua,Ca=[];for(xa=0;xa<B;xa++){ya=Qa(bb(l,pa,R,v));for(Ba=0;Ba<ya.length;Ba++){oa=ya[Ba];for(ja=0;ja<oa.length;ja++){ua=oa[ja];ua.row=xa;ua.level=Ba;Ca.push(ua)}}k(R,7);k(v,7)}return Ca}function j(l,B){var v=ga(),R;B.draggable({zIndex:9,delay:50,opacity:p("dragOpacity"),
revertDuration:p("dragRevertDuration"),start:function(pa,xa){o("eventDragStart",B,l,pa,xa);G(l,B);v.start(function(ya,Ba,oa,ja){B.draggable("option","revert",!ya||!oa&&!ja);ca();if(ya){R=oa*7+ja*(p("isRTL")?-1:1);ta(k(m(l.start),R),k(Ia(l),R))}else R=0},pa,"drag")},stop:function(pa,xa){v.stop();ca();o("eventDragStop",B,l,pa,xa);if(R)fa(this,l,R,0,l.allDay,pa,xa);else{B.css("filter","");M(l,B)}}})}var h=this;h.renderEvents=function(l,B){r(l);P(e(l),B)};h.compileDaySegs=e;h.clearEvents=function(){s();
ka().empty()};h.bindDaySeg=function(l,B,v){A(l)&&j(l,B);v.isEnd&&w(l)&&ba(l,B,v);H(l,B)};zb.call(h);var p=h.opt,o=h.trigger,A=h.isEventDraggable,w=h.isEventResizable,r=h.reportEvents,s=h.reportEventClear,H=h.eventElementHandlers,M=h.showEvents,G=h.hideEvents,fa=h.eventDrop,ka=h.getDaySegmentContainer,ga=h.getHoverListener,ta=h.renderDayOverlay,ca=h.clearOverlays,U=h.getRowCnt,K=h.getColCnt,P=h.renderDaySegs,ba=h.resizableDayEvent}function Ab(e,j,h){function p(){function C(){aa.scrollTop(S)}var Y=
E(),N=m(Y);N.setHours(K("firstHour"));var S=fa(Y,N)+1;C();setTimeout(C,0)}function o(C){if(!K("selectable")){var Y=Math.min(la-1,Math.floor((C.pageX-Ba.offset().left-na)/ma)),N=H(Y),S=this.parentNode.className.match(/fc-slot(\d+)/);if(S){S=parseInt(S[1])*K("slotMinutes");N.setHours(Math.floor(S/60));N.setMinutes(S%60+Wa);P("dayClick",Ca[Y],N,false,C)}else P("dayClick",Ca[Y],N,true,C)}}function A(C,Y,N){N&&qa.build();var S=m(U.visStart);if(Bb){N=V(Y,S)*Sa+Ta+1;C=V(C,S)*Sa+Ta+1}else{N=V(C,S);C=V(Y,
S)}N=Math.max(0,N);C=Math.min(la,C);N<C&&w(0,N,0,C-1).click(o).mousedown(pa)}function w(C,Y,N,S){C=qa.rect(C,Y,N,S,da);return l(C,da)}function r(C,Y){for(var N=m(U.visStart),S=k(m(N),1),va=0;va<la;va++){var Ga=new Date(Math.max(N,C)),Ma=new Date(Math.min(S,Y));if(Ga<Ma){var Oa=va*Sa+Ta;Oa=qa.rect(0,Oa,0,Oa,y);Ga=fa(N,Ga);Ma=fa(N,Ma);Oa.top=Ga;Oa.height=Ma-Ga;l(Oa,y).click(o).mousedown(ta)}k(N,1);k(S,1)}}function s(C){var Y=H(C.col);C=C.row;K("allDaySlot")&&C--;C>=0&&q(Y,Wa+C*K("slotMinutes"));return Y}
function H(C){return k(m(U.visStart),C*Sa+Ta)}function M(C){return K("allDaySlot")&&!C.row}function G(C){return(C-Math.max(Cb,Db)+la)%la*Sa+Ta}function fa(C,Y){C=m(C,true);if(Y<q(m(C),Wa))return 0;if(Y>=q(m(C),gb))return L.height();var N=K("slotMinutes"),S=Y.getHours()*60+Y.getMinutes()-Wa,va=Math.floor(S/N),Ga=Na[va];if(Ga===d)Ga=Na[va]=L.find("tr:eq("+va+") td div")[0].offsetTop;return Math.max(0,Math.round(Ga-1+ra*(S%N/N)))}function ka(C,Y){var N=K("selectHelper");qa.build();if(N){var S=V(C,U.visStart)*
Sa+Ta;if(S>=0&&S<la){S=qa.rect(0,S,0,S,y);var va=fa(C,C),Ga=fa(C,Y);if(Ga>va){S.top=va;S.height=Ga-va;S.left+=2;S.width-=5;if(a.isFunction(N)){if(N=N(C,Y)){S.position="absolute";S.zIndex=8;J=a(N).css(S).appendTo(y)}}else{S.isStart=true;S.isEnd=true;J=a(xa({title:"",start:C,end:Y,className:["fc-select-helper"],editable:false},S));J.css("opacity",K("dragOpacity"))}if(J){J.click(o).mousedown(ta);y.append(J);Ra(J,S.width,true);Xa(J,S.height,true)}}}}else r(C,Y)}function ga(){B();if(J){J.remove();J=null}}
function ta(C){if(C.which==1&&K("selectable")){R(C);var Y;sa.start(function(N,S){ga();if(N&&N.col==S.col&&!M(N)){var va=s(S),Ga=s(N);Y=[va,q(m(va),K("slotMinutes")),Ga,q(m(Ga),K("slotMinutes"))].sort(qb);ka(Y[0],Y[3])}else Y=null},C);a(document).one("mouseup",function(N){sa.stop();if(Y){+Y[0]==+Y[1]&&ca(Y[0],false,N);v(Y[0],Y[3],false,N)}})}}function ca(C,Y,N){P("dayClick",Ca[G(C.getDay())],C,Y,N)}var U=this;U.renderAgenda=function(C){la=C;Ha=K("theme")?"ui":"fc";Db=K("weekends")?0:1;Cb=K("firstDay");
if(Bb=K("isRTL")){Sa=-1;Ta=la-1}else{Sa=1;Ta=0}Wa=Da(K("minTime"));gb=Da(K("maxTime"));Eb=K("columnFormat");if(Ba)ba();else{C=Ha+"-widget-header";var Y=Ha+"-widget-content",N,S,va,Ga,Ma,Oa=K("slotMinutes")%15==0;N="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+C+"'>&nbsp;</th>";for(S=0;S<la;S++)N+="<th class='fc- fc-col"+S+" "+C+"'/>";N+="<th class='fc-agenda-gutter "+C+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+
C+"'>&nbsp;</th>";for(S=0;S<la;S++)N+="<td class='fc- fc-col"+S+" "+Y+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";N+="<td class='fc-agenda-gutter "+Y+"'>&nbsp;</td></tr></tbody></table>";Ba=a(N).appendTo(e);oa=Ba.find("thead");ja=oa.find("th").slice(1,-1);ua=Ba.find("tbody");Ca=ua.find("td").slice(0,-1);u=Ca.find("div.fc-day-content div");O=Ca.eq(0);X=O.find("> div");fb(oa.add(oa.find("tr")));fb(ua.add(ua.find("tr")));z=oa.find("th:first");Q=Ba.find(".fc-agenda-gutter");
da=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(e);if(K("allDaySlot")){T=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(da);N="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+C+" fc-agenda-axis'>"+K("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+C+" fc-agenda-gutter'>&nbsp;</th></tr></table>";ea=a(N).appendTo(da);ha=ea.find("tr");ha.find("td").click(o).mousedown(pa);
z=z.add(ea.find("th:first"));Q=Q.add(ea.find("th.fc-agenda-gutter"));da.append("<div class='fc-agenda-divider "+C+"'><div class='fc-agenda-divider-inner'/></div>")}else T=a([]);aa=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(da);y=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(aa);t=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y);N="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";
va=E();Ga=q(m(va),gb);q(va,Wa);for(S=za=0;va<Ga;S++){Ma=va.getMinutes();N+="<tr class='fc-slot"+S+" "+(!Ma?"":"fc-minor")+"'><th class='fc-agenda-axis "+C+"'>"+(!Oa||!Ma?ya(va,K("axisFormat")):"&nbsp;")+"</th><td class='"+Y+"'><div style='position:relative'>&nbsp;</div></td></tr>";q(va,K("slotMinutes"));za++}N+="</tbody></table>";L=a(N).appendTo(y);x=L.find("div:first");L.find("td").click(o).mousedown(ta);z=z.add(L.find("th:first"))}va=D(new Date);for(C=0;C<la;C++){S=H(C);Y=ja.eq(C);Y.html(ya(S,Eb));
N=Ca.eq(C);+S==+va?N.addClass(Ha+"-state-highlight fc-today"):N.removeClass(Ha+"-state-highlight fc-today");lb(Y.add(N),S)}};U.setWidth=function(C){W=C;Ja.clear();na=0;Ra(z.width("").each(function(Y,N){na=Math.max(na,a(N).outerWidth())}),na);C=aa[0].clientWidth;if(Ea=aa.width()-C){Ra(Q,Ea);Q.show().prev().removeClass("fc-last")}else Q.hide().prev().addClass("fc-last");ma=Math.floor((C-na)/la);Ra(ja.slice(0,-1),ma)};U.setHeight=function(C,Y){if(C===d)C=ia;ia=C;Na={};var N=ua.position().top,S=aa.position().top,
va=Math.min(C-N,L.height()+S+1);X.height(va-$a(O));da.css("top",N);aa.height(va-S-1);ra=x.height()+1;Y&&p()};U.beforeHide=function(){wa=aa.scrollTop()};U.afterShow=function(){aa.scrollTop(wa)};U.defaultEventEnd=function(C){var Y=m(C.start);if(C.allDay)return Y;return q(Y,K("defaultEventMinutes"))};U.timePosition=fa;U.dayOfWeekCol=G;U.dateCell=function(C){return{row:Math.floor(V(C,U.visStart)/7),col:G(C.getDay())}};U.cellDate=s;U.cellIsAllDay=M;U.allDayRow=function(){return ha};U.allDayBounds=function(){return{left:na,
right:W-Ea}};U.getHoverListener=function(){return sa};U.colContentLeft=function(C){return Ja.left(C)};U.colContentRight=function(C){return Ja.right(C)};U.getDaySegmentContainer=function(){return T};U.getSlotSegmentContainer=function(){return t};U.getMinMinute=function(){return Wa};U.getMaxMinute=function(){return gb};U.getBodyContent=function(){return y};U.getRowCnt=function(){return 1};U.getColCnt=function(){return la};U.getColWidth=function(){return ma};U.getSlotHeight=function(){return ra};U.defaultSelectionEnd=
function(C,Y){if(Y)return m(C);return q(m(C),K("slotMinutes"))};U.renderDayOverlay=A;U.renderSelection=function(C,Y,N){if(N)K("allDaySlot")&&A(C,k(m(Y),1),true);else ka(C,Y)};U.clearSelection=ga;U.reportDayClick=ca;U.dragStart=function(C,Y){sa.start(function(N){B();if(N)if(M(N))w(N.row,N.col,N.row,N.col);else{N=s(N);var S=q(m(N),K("defaultEventMinutes"));r(N,S)}},Y)};U.dragStop=function(C,Y,N){var S=sa.stop();B();S&&P("drop",C,s(S),M(S),Y,N)};tb.call(U,e,j,h);ub.call(U);vb.call(U);Mb.call(U);var K=
U.opt,P=U.trigger,ba=U.clearEvents,l=U.renderOverlay,B=U.clearOverlays,v=U.reportSelection,R=U.unselect,pa=U.daySelectionMousedown,xa=U.slotSegHtml,ya=j.formatDate,Ba,oa,ja,ua,Ca,u,O,X,da,T,ea,ha,aa,y,t,L,x,z,Q,J,W,ia,na,ma,Ea,ra,wa,la,za,qa,sa,Ja,Na={},Ha,Cb,Db,Bb,Sa,Ta,Wa,gb,Eb;kb(e.addClass("fc-agenda"));qa=new wb(function(C,Y){var N,S,va;ja.each(function(Fb,Nb){N=a(Nb);S=N.offset().left;if(Fb)va[1]=S;va=[S];Y[Fb]=va});va[1]=S+N.outerWidth();if(K("allDaySlot")){N=ha;S=N.offset().top;C[0]=[S,S+
N.outerHeight()]}for(var Ga=y.offset().top,Ma=aa.offset().top,Oa=Ma+aa.outerHeight(),hb=0;hb<za;hb++)C.push([Math.max(Ma,Math.min(Oa,Ga+ra*hb)),Math.max(Ma,Math.min(Oa,Ga+ra*(hb+1)))])});sa=new xb(qa);Ja=new yb(function(C){return u.eq(C)})}function Mb(){function e(y){y=Qa(bb(y,a.map(y,Ia),r.visStart,r.visEnd));var t,L=y.length,x,z,Q,J=[];for(t=0;t<L;t++){x=y[t];for(z=0;z<x.length;z++){Q=x[z];Q.row=0;Q.level=t;J.push(Q)}}return J}function j(y){return y.end?m(y.end):q(m(y.start),s("defaultEventMinutes"))}
function h(y,t){var L="<",x=y.url,z=sb(y,s),Q=z?" style='"+z+"'":"",J=["fc-event","fc-event-skin","fc-event-vert"];M(y)&&J.push("fc-event-draggable");t.isStart&&J.push("fc-corner-top");t.isEnd&&J.push("fc-corner-bottom");J=J.concat(y.className);if(y.source)J=J.concat(y.source.className||[]);L+=x?"a href='"+Za(y.url)+"'":"div";L+=" class='"+J.join(" ")+"' style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+z+"'><div class='fc-event-inner fc-event-skin'"+Q+"><div class='fc-event-head fc-event-skin'"+
Q+"><div class='fc-event-time'>"+Za(aa(y.start,y.end,s("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Za(y.title)+"</div></div><div class='fc-event-bg'></div></div>";if(t.isEnd&&G(y))L+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";L+="</"+(x?"a":"div")+">";return L}function p(y,t,L){var x=t.find("div.fc-event-time");M(y)&&A(y,t,x);L.isEnd&&G(y)&&w(y,t,x);ta(y,t)}function o(y,t,L){function x(){if(!J){t.width(z).height("").draggable("option","grid",
null);J=true}}var z,Q,J=true,W,ia=s("isRTL")?-1:1,na=P(),ma=Ba(),Ea=oa(),ra=l();t.draggable({zIndex:9,opacity:s("dragOpacity","month"),revertDuration:s("dragRevertDuration"),start:function(wa,la){H("eventDragStart",t,y,wa,la);u(y,t);z=t.width();na.start(function(za,qa,sa,Ja){T();if(za){Q=false;W=Ja*ia;if(za.row)if(L){if(J){t.width(ma-10);Xa(t,Ea*Math.round((y.end?(y.end-y.start)/Ob:s("defaultEventMinutes"))/s("slotMinutes")));t.draggable("option","grid",[ma,1]);J=false}}else Q=true;else{da(k(m(y.start),
W),k(Ia(y),W));x()}Q=Q||J&&!W}else{x();Q=true}t.draggable("option","revert",Q)},wa,"drag")},stop:function(wa,la){na.stop();T();H("eventDragStop",t,y,wa,la);if(Q){x();t.css("filter","");Ca(y,t)}else{var za=0;J||(za=Math.round((t.offset().top-ja().offset().top)/Ea)*s("slotMinutes")+ra-(y.start.getHours()*60+y.start.getMinutes()));O(this,y,W,za,J,wa,la)}}})}function A(y,t,L){function x(za){var qa=q(m(y.start),za),sa;if(y.end)sa=q(m(y.end),za);L.text(aa(qa,sa,s("timeFormat")))}function z(){if(J){L.css("display",
"");t.draggable("option","grid",[wa,la]);J=false}}var Q,J=false,W,ia,na,ma=s("isRTL")?-1:1,Ea=P(),ra=ya(),wa=Ba(),la=oa();t.draggable({zIndex:9,scroll:false,grid:[wa,la],axis:ra==1?"y":false,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(za,qa){H("eventDragStart",t,y,za,qa);u(y,t);Q=t.position();ia=na=0;Ea.start(function(sa,Ja,Na,Ha){t.draggable("option","revert",!sa);T();if(sa){W=Ha*ma;if(s("allDaySlot")&&!sa.row){if(!J){J=true;L.hide();t.draggable("option","grid",
null)}da(k(m(y.start),W),k(Ia(y),W))}else z()}},za,"drag")},drag:function(za,qa){ia=Math.round((qa.position.top-Q.top)/la)*s("slotMinutes");if(ia!=na){J||x(ia);na=ia}},stop:function(za,qa){var sa=Ea.stop();T();H("eventDragStop",t,y,za,qa);if(sa&&(W||ia||J))O(this,y,W,J?0:ia,J,za,qa);else{z();t.css("filter","");t.css(Q);x(0);Ca(y,t)}}})}function w(y,t,L){var x,z,Q=oa();t.resizable({handles:{s:"div.ui-resizable-s"},grid:Q,start:function(J,W){x=z=0;u(y,t);t.css("z-index",9);H("eventResizeStart",this,
y,J,W)},resize:function(J,W){x=Math.round((Math.max(Q,t.height())-W.originalSize.height)/Q);if(x!=z){L.text(aa(y.start,!x&&!y.end?null:q(fa(y),s("slotMinutes")*x),s("timeFormat")));z=x}},stop:function(J,W){H("eventResizeStop",this,y,J,W);if(x)X(this,y,0,s("slotMinutes")*x,J,W);else{t.css("z-index",8);Ca(y,t)}}})}var r=this;r.renderEvents=function(y,t){ka(y);var L,x=y.length,z=[],Q=[];for(L=0;L<x;L++)y[L].allDay?z.push(y[L]):Q.push(y[L]);if(s("allDaySlot")){pa(e(z),t);ca()}x=ya();z=l();var J=ba(),
W=q(m(r.visStart),z),ia=a.map(Q,j),na,ma,Ea,ra,wa,la;L=[];for(na=0;na<x;na++){Ea=ma=Qa(bb(Q,ia,W,q(m(W),J-z)));ra=void 0;wa=void 0;la=void 0;var za=void 0,qa=void 0,sa=void 0;for(ra=Ea.length-1;ra>0;ra--){za=Ea[ra];for(wa=0;wa<za.length;wa++){qa=za[wa];for(la=0;la<Ea[ra-1].length;la++){sa=Ea[ra-1][la];if(qa.end>sa.start&&qa.start<sa.end)sa.forward=Math.max(sa.forward||0,(qa.forward||0)+1)}}}for(Ea=0;Ea<ma.length;Ea++){ra=ma[Ea];for(wa=0;wa<ra.length;wa++){la=ra[wa];la.col=na;la.level=Ea;L.push(la)}}k(W,
1,true)}Q=L.length;var Ja,Na,Ha;ma="";J={};W={};na=K();x=ya();if(Ea=s("isRTL")){ra=-1;za=x-1}else{ra=1;za=0}for(x=0;x<Q;x++){z=L[x];ia=z.event;wa=B(z.start,z.start);la=B(z.start,z.end);Ja=z.col;qa=z.level;sa=z.forward||0;Na=v(Ja*ra+za);Ha=R(Ja*ra+za)-Na;Ha=Math.min(Ha-6,Ha*0.95);Ja=qa?Ha/(qa+sa+1):sa?(Ha/(sa+1)-6)*2:Ha;qa=Na+Ha/(qa+sa+1)*qa*ra+(Ea?Ha-Ja:0);z.top=wa;z.left=qa;z.outerWidth=Ja;z.outerHeight=la-wa;ma+=h(ia,z)}na[0].innerHTML=ma;Ea=na.children();for(x=0;x<Q;x++){z=L[x];ia=z.event;ma=a(Ea[x]);
ra=H("eventRender",ia,ia,ma);if(ra===false)ma.remove();else{if(ra&&ra!==true){ma.remove();ma=a(ra).css({position:"absolute",top:z.top,left:z.left}).appendTo(na)}z.element=ma;if(ia._id===t)p(ia,ma,z);else ma[0]._fci=x;ua(ia,ma)}}La(na,L,p);for(x=0;x<Q;x++){z=L[x];if(ma=z.element){na=J[ia=z.key=rb(ma[0])];z.vsides=na===d?J[ia]=$a(ma,true):na;na=W[ia];z.hsides=na===d?W[ia]=jb(ma,true):na;ia=ma.find("div.fc-event-content");if(ia.length)z.contentTop=ia[0].offsetTop}}for(x=0;x<Q;x++){z=L[x];if(ma=z.element){ma[0].style.width=
Math.max(0,z.outerWidth-z.hsides)+"px";J=Math.max(0,z.outerHeight-z.vsides);ma[0].style.height=J+"px";ia=z.event;if(z.contentTop!==d&&J-z.contentTop<10){ma.find("div.fc-event-time").text(ha(ia.start,s("timeFormat"))+" - "+ia.title);ma.find("div.fc-event-title").remove()}H("eventAfterRender",ia,ia,ma)}}};r.compileDaySegs=e;r.clearEvents=function(){ga();U().empty();K().empty()};r.slotSegHtml=h;r.bindDaySeg=function(y,t,L){M(y)&&o(y,t,L.isStart);L.isEnd&&G(y)&&xa(y,t,L);ta(y,t)};zb.call(r);var s=r.opt,
H=r.trigger,M=r.isEventDraggable,G=r.isEventResizable,fa=r.eventEnd,ka=r.reportEvents,ga=r.reportEventClear,ta=r.eventElementHandlers,ca=r.setHeight,U=r.getDaySegmentContainer,K=r.getSlotSegmentContainer,P=r.getHoverListener,ba=r.getMaxMinute,l=r.getMinMinute,B=r.timePosition,v=r.colContentLeft,R=r.colContentRight,pa=r.renderDaySegs,xa=r.resizableDayEvent,ya=r.getColCnt,Ba=r.getColWidth,oa=r.getSlotHeight,ja=r.getBodyContent,ua=r.reportEventElement,Ca=r.showEvents,u=r.hideEvents,O=r.eventDrop,X=r.eventResize,
da=r.renderDayOverlay,T=r.clearOverlays,ea=r.calendar,ha=ea.formatDate,aa=ea.formatDates}function tb(e,j,h){function p(K,P){var ba=U[K];if(typeof ba=="object")return ib(ba,P||h);return ba}function o(K,P){return j.trigger.apply(j,[K,P||M].concat(Array.prototype.slice.call(arguments,2),[M]))}function A(K){return ab(K.editable,(K.source||{}).editable,p("editable"))}function w(K){return K.end?m(K.end):G(K)}function r(K,P,ba){K=ca[K._id];var l,B=K.length;for(l=0;l<B;l++)if(!P||K[l][0]!=P[0])K[l][ba]()}
function s(K,P,ba,l){ba=ba||0;for(var B,v=K.length,R=0;R<v;R++){B=K[R];if(l!==d)B.allDay=l;q(k(B.start,P,true),ba);if(B.end)B.end=q(k(B.end,P,true),ba);fa(B,U)}}function H(K,P,ba){ba=ba||0;for(var l,B=K.length,v=0;v<B;v++){l=K[v];l.end=q(k(w(l),P,true),ba);fa(l,U)}}var M=this;M.element=e;M.calendar=j;M.name=h;M.opt=p;M.trigger=o;M.isEventDraggable=function(K){return A(K)&&!p("disableDragging")};M.isEventResizable=function(K){return A(K)&&!p("disableResizing")};M.reportEvents=function(K){ga={};var P,
ba=K.length,l;for(P=0;P<ba;P++){l=K[P];if(ga[l._id])ga[l._id].push(l);else ga[l._id]=[l]}};M.eventEnd=w;M.reportEventElement=function(K,P){ta.push(P);if(ca[K._id])ca[K._id].push(P);else ca[K._id]=[P]};M.reportEventClear=function(){ta=[];ca={}};M.eventElementHandlers=function(K,P){P.click(function(ba){if(!P.hasClass("ui-draggable-dragging")&&!P.hasClass("ui-resizable-resizing"))return o("eventClick",this,K,ba)}).hover(function(ba){o("eventMouseover",this,K,ba)},function(ba){o("eventMouseout",this,
K,ba)})};M.showEvents=function(K,P){r(K,P,"show")};M.hideEvents=function(K,P){r(K,P,"hide")};M.eventDrop=function(K,P,ba,l,B,v,R){var pa=P.allDay,xa=P._id;s(ga[xa],ba,l,B);o("eventDrop",K,P,ba,l,B,function(){s(ga[xa],-ba,-l,pa);ka(xa)},v,R);ka(xa)};M.eventResize=function(K,P,ba,l,B,v){var R=P._id;H(ga[R],ba,l);o("eventResize",K,P,ba,l,function(){H(ga[R],-ba,-l);ka(R)},B,v);ka(R)};var G=M.defaultEventEnd,fa=j.normalizeEvent,ka=j.reportEventChange,ga={},ta=[],ca={},U=j.options}function zb(){function e(u){var O=
H("isRTL"),X,da=u.length,T,ea,ha,aa;X=l();var y=X.left,t=X.right,L,x,z,Q,J,W="";for(X=0;X<da;X++){T=u[X];ea=T.event;aa=["fc-event","fc-event-skin","fc-event-hori"];G(ea)&&aa.push("fc-event-draggable");if(O){T.isStart&&aa.push("fc-corner-right");T.isEnd&&aa.push("fc-corner-left");L=R(T.end.getDay()-1);x=R(T.start.getDay());z=T.isEnd?B(L):y;Q=T.isStart?v(x):t}else{T.isStart&&aa.push("fc-corner-left");T.isEnd&&aa.push("fc-corner-right");L=R(T.start.getDay());x=R(T.end.getDay()-1);z=T.isStart?B(L):y;
Q=T.isEnd?v(x):t}aa=aa.concat(ea.className);if(ea.source)aa=aa.concat(ea.source.className||[]);ha=ea.url;J=sb(ea,H);W+=ha?"<a href='"+Za(ha)+"'":"<div";W+=" class='"+aa.join(" ")+"' style='position:absolute;z-index:8;left:"+z+"px;"+J+"'><div class='fc-event-inner fc-event-skin'"+(J?" style='"+J+"'":"")+">";if(!ea.allDay&&T.isStart)W+="<span class='fc-event-time'>"+Za(oa(ea.start,ea.end,H("timeFormat")))+"</span>";W+="<span class='fc-event-title'>"+Za(ea.title)+"</span></div>";if(T.isEnd&&fa(ea))W+=
"<div class='ui-resizable-handle ui-resizable-"+(O?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";W+="</"+(ha?"a":"div")+">";T.left=z;T.outerWidth=Q-z;T.startCol=L;T.endCol=x+1}return W}function j(u,O){var X,da=u.length,T,ea,ha;for(X=0;X<da;X++){T=u[X];ea=T.event;ha=a(O[X]);ea=M("eventRender",ea,ea,ha);if(ea===false)ha.remove();else{if(ea&&ea!==true){ea=a(ea).css({position:"absolute",left:T.left});ha.replaceWith(ea);ha=ea}T.element=ha}}}function h(u){var O,X=u.length,da,T,ea,ha,aa={};for(O=0;O<X;O++){da=u[O];
if(T=da.element){ea=da.key=rb(T[0]);ha=aa[ea];if(ha===d)ha=aa[ea]=jb(T,true);da.hsides=ha}}}function p(u){var O,X=u.length,da,T;for(O=0;O<X;O++){da=u[O];if(T=da.element)T[0].style.width=Math.max(0,da.outerWidth-da.hsides)+"px"}}function o(u){var O,X=u.length,da,T,ea,ha,aa={};for(O=0;O<X;O++){da=u[O];if(T=da.element){ea=da.key;ha=aa[ea];if(ha===d)ha=aa[ea]=pb(T);da.outerHeight=T[0].offsetHeight+ha}}}function A(){var u,O=K(),X=[];for(u=0;u<O;u++)X[u]=ba(u).find("td:first div.fc-day-content > div");
return X}function w(u){var O,X=u.length,da=[];for(O=0;O<X;O++)da[O]=u[O][0].offsetTop;return da}function r(u,O){var X,da=u.length,T,ea;for(X=0;X<da;X++){T=u[X];if(ea=T.element){ea[0].style.top=O[T.row]+(T.top||0)+"px";T=T.event;M("eventAfterRender",T,T,ea)}}}var s=this;s.renderDaySegs=function(u,O){var X=ya(),da=K(),T=P(),ea=0,ha,aa,y,t=u.length,L,x;X[0].innerHTML=e(u);j(u,X.children());aa=u.length;for(ha=0;ha<aa;ha++){y=u[ha];(x=y.element)&&ga(y.event,x)}aa=u.length;var z;for(ha=0;ha<aa;ha++){y=
u[ha];if(x=y.element){z=y.event;if(z._id===O)Ba(z,x,y);else x[0]._fci=ha}}La(X,u,Ba);h(u);p(u);o(u);X=A();for(ha=0;ha<da;ha++){aa=[];for(y=0;y<T;y++)aa[y]=0;for(;ea<t&&(L=u[ea]).row==ha;){y=aa.slice(L.startCol,L.endCol);y=Math.max.apply(Math,y);L.top=y;y+=L.outerHeight;for(x=L.startCol;x<L.endCol;x++)aa[x]=y;ea++}X[ha].height(Math.max.apply(Math,aa))}r(u,w(X))};s.resizableDayEvent=function(u,O,X){var da=H("isRTL"),T=da?"w":"e",ea=O.find("div.ui-resizable-"+T),ha=false;kb(O);O.mousedown(function(aa){aa.preventDefault()}).click(function(aa){if(ha){aa.preventDefault();
aa.stopImmediatePropagation()}});ea.mousedown(function(aa){if(aa.which==1){ha=true;var y=s.getHoverListener(),t=K(),L=P(),x=da?-1:1,z=da?L-1:0,Q=O.css("top"),J,W,ia=a.extend({},u),na=pa(u.start);Ca();a("body").css("cursor",T+"-resize").one("mouseup",function(ma){M("eventResizeStop",this,u,ma);a("body").css("cursor","");y.stop();ua();J&&U(this,u,J,0,ma);setTimeout(function(){ha=false},0)});M("eventResizeStart",this,u,aa);y.start(function(ma,Ea){if(ma){var ra=Math.max(na.row,ma.row),wa=ma.col;if(t==
1)ra=0;if(ra==na.row)wa=da?Math.min(na.col,wa):Math.max(na.col,wa);J=ra*7+wa*x+z-(Ea.row*7+Ea.col*x+z);ra=k(ka(u),J,true);if(J){ia.end=ra;wa=W;var la=xa([ia]),za=X.row,qa=a("<div/>"),sa=ya(),Ja=la.length,Na;qa[0].innerHTML=e(la);qa=qa.children();sa.append(qa);j(la,qa);h(la);p(la);o(la);r(la,w(A()));qa=[];for(sa=0;sa<Ja;sa++)if(Na=la[sa].element){la[sa].row===za&&Na.css("top",Q);qa.push(Na[0])}W=a(qa);W.find("*").css("cursor",T+"-resize");wa&&wa.remove();ca(u)}else if(W){ta(u);W.remove();W=null}ua();
ja(u.start,k(m(ra),1))}},aa)}})};var H=s.opt,M=s.trigger,G=s.isEventDraggable,fa=s.isEventResizable,ka=s.eventEnd,ga=s.reportEventElement,ta=s.showEvents,ca=s.hideEvents,U=s.eventResize,K=s.getRowCnt,P=s.getColCnt,ba=s.allDayRow,l=s.allDayBounds,B=s.colContentLeft,v=s.colContentRight,R=s.dayOfWeekCol,pa=s.dateCell,xa=s.compileDaySegs,ya=s.getDaySegmentContainer,Ba=s.bindDaySeg,oa=s.calendar.formatDates,ja=s.renderDayOverlay,ua=s.clearOverlays,Ca=s.clearSelection}function vb(){function e(H){if(s){s=
false;r();o("unselect",null,H)}}function j(H,M,G,fa){s=true;o("select",null,H,M,G,fa)}var h=this;h.select=function(H,M,G){e();M||(M=A(H,G));w(H,M,G);j(H,M,G)};h.unselect=e;h.reportSelection=j;h.daySelectionMousedown=function(H){var M=h.cellDate,G=h.cellIsAllDay,fa=h.getHoverListener(),ka=h.reportDayClick;if(H.which==1&&p("selectable")){e(H);var ga;fa.start(function(ta,ca){r();if(ta&&G(ta)){ga=[M(ca),M(ta)].sort(qb);w(ga[0],ga[1],true)}else ga=null},H);a(document).one("mouseup",function(ta){fa.stop();
if(ga){+ga[0]==+ga[1]&&ka(ga[0],true,ta);j(ga[0],ga[1],true,ta)}})}};var p=h.opt,o=h.trigger,A=h.defaultSelectionEnd,w=h.renderSelection,r=h.clearSelection,s=false;p("selectable")&&p("unselectAuto")&&a(document).mousedown(function(H){var M=p("unselectCancel");if(M)if(a(H.target).parents(M).length)return;e(H)})}function ub(){this.renderOverlay=function(h,p){var o=j.shift();o||(o=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=p[0]&&o.appendTo(p);e.push(o.css(h).show());
return o};this.clearOverlays=function(){for(var h;h=e.shift();)j.push(h.hide().unbind())};var e=[],j=[]}function wb(e){var j,h;this.build=function(){j=[];h=[];e(j,h)};this.cell=function(p,o){var A=j.length,w=h.length,r,s=-1,H=-1;for(r=0;r<A;r++)if(o>=j[r][0]&&o<j[r][1]){s=r;break}for(r=0;r<w;r++)if(p>=h[r][0]&&p<h[r][1]){H=r;break}return s>=0&&H>=0?{row:s,col:H}:null};this.rect=function(p,o,A,w,r){r=r.offset();return{top:j[p][0]-r.top,left:h[o][0]-r.left,width:h[w][1]-h[o][0],height:j[A][1]-j[p][0]}}}
function xb(e){function j(w){w=e.cell(w.pageX,w.pageY);if(!w!=!A||w&&(w.row!=A.row||w.col!=A.col)){if(w){o||(o=w);p(w,o,w.row-o.row,w.col-o.col)}else p(w,o);A=w}}var h,p,o,A;this.start=function(w,r,s){p=w;o=A=null;e.build();j(r);h=s||"mousemove";a(document).bind(h,j)};this.stop=function(){a(document).unbind(h,j);return A}}function yb(e){var j=this,h={},p={},o={};j.left=function(A){return p[A]=p[A]===d?(h[A]=h[A]||e(A)).position().left:p[A]};j.right=function(A){return o[A]=o[A]===d?j.left(A)+(h[A]=
h[A]||e(A)).width():o[A]};j.clear=function(){h={};p={};o={}}}var cb={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February",
"March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},
theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Pb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ka=a.fullCalendar={version:"1.5.1"},Ua=Ka.views={};a.fn.fullCalendar=function(e){if(typeof e=="string"){var j=Array.prototype.slice.call(arguments,
1),h;this.each(function(){var o=a.data(this,"fullCalendar");if(o&&a.isFunction(o[e])){o=o[e].apply(o,j);if(h===d)h=o;e=="destroy"&&a.removeData(this,"fullCalendar")}});if(h!==d)return h;return this}var p=e.eventSources||[];delete e.eventSources;if(e.events){p.push(e.events);delete e.events}e=a.extend(true,{},cb,e.isRTL||e.isRTL===d&&cb.isRTL?Pb:{},e);this.each(function(o,A){var w=a(A),r=new b(w,e,p);w.data("fullCalendar",r);r.render()});return this};Ka.sourceNormalizers=[];Ka.sourceFetchers=[];var Gb=
{dataType:"json",cache:false},Hb=1;Ka.addDays=k;Ka.cloneDate=m;Ka.parseDate=$;Ka.parseISO8601=Aa;Ka.parseTime=Da;Ka.formatDate=Fa;Ka.formatDates=Pa;var Kb=["sun","mon","tue","wed","thu","fri","sat"],ob=864E5,Ib=36E5,Ob=6E4,Jb={s:function(e){return e.getSeconds()},ss:function(e){return Ya(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return Ya(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return Ya(e.getHours()%12||12)},H:function(e){return e.getHours()},
HH:function(e){return Ya(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return Ya(e.getDate())},ddd:function(e,j){return j.dayNamesShort[e.getDay()]},dddd:function(e,j){return j.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return Ya(e.getMonth()+1)},MMM:function(e,j){return j.monthNamesShort[e.getMonth()]},MMMM:function(e,j){return j.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},
t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return Fa(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){e=e.getDate();if(e>10&&e<20)return"th";return["st","nd","rd"][e%10-1]||"th"}};Ka.applyAll=eb;Ua.month=function(e,j){var h=this;h.render=function(w,r){if(r){n(w,r);w.setDate(1)}var s=m(w,true);s.setDate(1);var H=n(m(s),1),M=m(s),G=m(H),fa=p("firstDay"),
ka=p("weekends")?0:1;if(ka){F(M);F(G,-1,true)}k(M,-((M.getDay()-Math.max(fa,ka)+7)%7));k(G,(7-G.getDay()+Math.max(fa,ka))%7);fa=Math.round((G-M)/(ob*7));if(p("weekMode")=="fixed"){k(G,(6-fa)*7);fa=6}h.title=A(s,p("titleFormat"));h.start=s;h.end=H;h.visStart=M;h.visEnd=G;o(6,fa,ka?5:7,true)};mb.call(h,e,j,"month");var p=h.opt,o=h.renderBasic,A=j.formatDate};Ua.basicWeek=function(e,j){var h=this;h.render=function(w,r){r&&k(w,r*7);var s=k(m(w),-((w.getDay()-p("firstDay")+7)%7)),H=k(m(s),7),M=m(s),G=
m(H),fa=p("weekends");if(!fa){F(M);F(G,-1,true)}h.title=A(M,k(m(G),-1),p("titleFormat"));h.start=s;h.end=H;h.visStart=M;h.visEnd=G;o(1,1,fa?7:5,false)};mb.call(h,e,j,"basicWeek");var p=h.opt,o=h.renderBasic,A=j.formatDates};Ua.basicDay=function(e,j){var h=this;h.render=function(w,r){if(r){k(w,r);p("weekends")||F(w,r<0?-1:1)}h.title=A(w,p("titleFormat"));h.start=h.visStart=m(w,true);h.end=h.visEnd=k(m(h.start),1);o(1,1,1,false)};mb.call(h,e,j,"basicDay");var p=h.opt,o=h.renderBasic,A=j.formatDate};
c({weekMode:"fixed"});Ua.agendaWeek=function(e,j){var h=this;h.render=function(w,r){r&&k(w,r*7);var s=k(m(w),-((w.getDay()-p("firstDay")+7)%7)),H=k(m(s),7),M=m(s),G=m(H),fa=p("weekends");if(!fa){F(M);F(G,-1,true)}h.title=A(M,k(m(G),-1),p("titleFormat"));h.start=s;h.end=H;h.visStart=M;h.visEnd=G;o(fa?7:5)};Ab.call(h,e,j,"agendaWeek");var p=h.opt,o=h.renderAgenda,A=j.formatDates};Ua.agendaDay=function(e,j){var h=this;h.render=function(w,r){if(r){k(w,r);p("weekends")||F(w,r<0?-1:1)}var s=m(w,true),H=
k(m(s),1);h.title=A(w,p("titleFormat"));h.start=h.visStart=s;h.end=h.visEnd=H;o(1)};Ab.call(h,e,j,"agendaDay");var p=h.opt,o=h.renderAgenda,A=j.formatDate};c({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function d(g,i,n){var k=i;if(i<10)k="0"+i;if(n.isoTime){i=g;if(i<10)i="0"+g;return i+":"+k}else{i=g%12;if(i==0)i=12;g=n.meridiemUpperCase?g<12?"AM":"PM":g<12?"am":"pm";return i+":"+k+g}}function c(g){if((g=g=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(g))&&g.length>=3){var i=Number(g[1]),n=Number(g[2]);if(i==12&&g[3])i-=12;if(g[3]&&g[3].toLowerCase()=="pm")i+=12;return{hour:i,minute:n}}else return null}function b(g){return g&&g.hour*60+g.minute}function f(g,i){var n=b(i.minTime),k=b(i.maxTime),
I=b(i.defaultTime),q=i.selection&&b(c(i.selection)),D=i.minutes,m=i.onehour,E=i.hours;q=q&&Math.floor((q-n)/i.timeInterval)*i.timeInterval+n;for(var F,V=a("<ul></ul>"),Z=n;Z<=k;Z+=i.timeInterval)(function($){var Aa=d(Math.floor($/60),$%60,i),Da=Aa;if(i.showDuration){var Fa=$-n;Da+=Fa<60?" ("+Fa+" "+D+")":Fa==60?" ("+m+")":" ("+Math.round(Fa/60*10)/10+" "+E+")"}Da=a("<li></li>").append(a('<a href="javascript:void(0);">'+Da+"</a>").click(function(){i&&i.selectTime&&i.selectTime(Aa);return false}).mousemove(function(){a("li.selected",
V).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(V);if(!F&&$==I)F=Da;if(q==$){Da.addClass("selected").addClass("ui-state-highlight");F=Da}})(Z);F&&setTimeout(function(){g[0].scrollTop=F[0].offsetTop-F.height()*2},0);g.empty().append(V)}a.fn.calendricalTime=function(g){g=g||{};g.timeInterval=g.timeInterval||30;g.padding=g.padding||4;return this.each(function(){var i=a(this),n,k=false;i.bind("focus click",
function(){if(!n){var I=i.position();n=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){k=true}).mouseleave(function(){k=false}).mousedown(function(D){D.preventDefault()}).css({position:"absolute",left:I.left,top:I.top+i.height()+g.padding*2});i.after(n);I={selection:i.val(),selectTime:function(D){k=false;i.val(D);n.remove();n=null},isoTime:g.isoTime||false,meridiemUpperCase:g.meridiemUpperCase||false,defaultTime:g.defaultTime||{hour:8,minute:0},
minTime:g.minTime||{hour:0,minute:0},maxTime:g.maxTime||{hour:23,minute:59},timeInterval:g.timeInterval||30,minutes:g.minutes||"mins",onehour:g.onehour||"1 hr",hours:g.hours||"hrs"};if(g.startTime){var q=c(g.startTime.val());if(g.startDate&&g.endDate&&!areDatesEqual(parseDate(g.startDate.val()),parseDate(g.endDate.val())))q=null;if(q){I.minTime=q;I.showDuration=true;n.addClass("calendricalEndTimePopup")}}f(n,I)}}).blur(function(){if(k)n&&i.focus();else if(n){n.remove();n=null}})})};a.fn.calendricalTimeRange=
function(g){if(this.length>=2){a(this[0]).calendricalTime(g);a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},g))}return this}})(jQuery);
(function(a){function d(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:false,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showTimezone:false,showTime:true,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,
hourMax:23,minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,showTimepicker:true,timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"]};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(d.prototype,
{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300",
"+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"],setDefaults:function(c){var b=this._defaults;c=c||{};a.extend(b,c);for(var f in c)if(c[f]===null||c[f]===undefined)b[f]=c[f];return this},_newInst:function(c,b){var f=new d,g={},i;for(i in this._defaults){var n=c.attr("time:"+i);if(n)try{g[i]=eval(n)}catch(k){g[i]=n}}f._defaults=a.extend({},this._defaults,g,b,{beforeShow:function(I,q){a.isFunction(b.beforeShow)&&b.beforeShow(I,q,f)},onChangeMonthYear:function(I,q,D){f._updateDateTime(D);
a.isFunction(b.onChangeMonthYear)&&b.onChangeMonthYear.call(c[0],I,q,D,f)},onClose:function(I,q){f.timeDefined===true&&c.val()!=""&&f._updateDateTime(q);a.isFunction(b.onClose)&&b.onClose.call(c[0],I,q,f)},timepicker:f});f.hour=f._defaults.hour;f.minute=f._defaults.minute;f.second=f._defaults.second;f.ampm="";f.$input=c;if(b.altField)f.$altInput=a(b.altField).css({cursor:"pointer"}).focus(function(){c.trigger("focus")});if(f._defaults.minDate!==undefined&&f._defaults.minDate instanceof Date)f._defaults.minDateTime=
new Date(f._defaults.minDate.getTime());if(f._defaults.minDateTime!==undefined&&f._defaults.minDateTime instanceof Date)f._defaults.minDate=new Date(f._defaults.minDateTime.getTime());if(f._defaults.maxDate!==undefined&&f._defaults.maxDate instanceof Date)f._defaults.maxDateTime=new Date(f._defaults.maxDate.getTime());if(f._defaults.maxDateTime!==undefined&&f._defaults.maxDateTime instanceof Date)f._defaults.maxDate=new Date(f._defaults.maxDateTime.getTime());return f},_addTimePicker:function(c){this.timeDefined=
this._parseTime(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this._limitMinMaxDateTime(c,false);this._injectTimePicker()},_parseTime:function(c,b){var f=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",g=this._getFormatPositions();if(!this.inst)this.inst=
a.datepicker._getInst(this.$input[0]);if(b||!this._defaults.timeOnly)f=".{"+a.datepicker._get(this.inst,"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+f;if(f=c.match(RegExp(f,"i"))){if(g.t!==-1)this.ampm=(f[g.t]===undefined||f[g.t].length===0?"":f[g.t].charAt(0).toUpperCase()=="A"?"AM":"PM").toUpperCase();if(g.h!==-1)this.hour=this.ampm=="AM"&&f[g.h]=="12"?0:this.ampm=="PM"&&f[g.h]!="12"?(parseFloat(f[g.h])+12).toFixed(0):Number(f[g.h]);if(g.m!==
-1)this.minute=Number(f[g.m]);if(g.s!==-1)this.second=Number(f[g.s]);if(g.z!==-1)this.timezone=f[g.z];return true}return false},_getFormatPositions:function(){var c=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),b={h:-1,m:-1,s:-1,t:-1,z:-1};if(c)for(var f=0;f<c.length;f++)if(b[c[f].toString().charAt(0)]==-1)b[c[f].toString().charAt(0)]=f+1;return b},_injectTimePicker:function(){var c=this.inst.dpDiv,b=this._defaults,f=this,g=(b.hourMax-b.hourMax%b.stepHour).toFixed(0),
i=(b.minuteMax-b.minuteMax%b.stepMinute).toFixed(0),n=(b.secondMax-b.secondMax%b.stepSecond).toFixed(0),k=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(c.find("div#ui-timepicker-div-"+k).length===0&&b.showTimepicker){var I='<div class="ui-timepicker-div" id="ui-timepicker-div-'+k+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+k+'"'+(b.showTime?"":' style="display:none;"')+">"+b.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+k+'"'+(b.showTime?"":
' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+k+'"'+(b.showHour?"":' style="display:none;"')+">"+b.hourText+"</dt>",q=0,D=0,m=0,E;if(b.showHour&&b.hourGrid>0){I+='<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+k+'"'+(b.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(var F=b.hourMin;F<g;F+=b.hourGrid){q++;var V=b.ampm&&F>12?F-12:F;if(V<10)V="0"+V;if(b.ampm)if(F==0)V="12a";else V+=F<12?"a":"p";I+=
"<td>"+V+"</td>"}I+="</tr></table></div></dd>"}else I+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+k+'"'+(b.showHour?"":' style="display:none;"')+"></dd>";I+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+k+'"'+(b.showMinute?"":' style="display:none;"')+">"+b.minuteText+"</dt>";if(b.showMinute&&b.minuteGrid>0){I+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+b.minuteGrid+'"><div id="ui_tpicker_minute_'+k+'"'+(b.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';
for(F=b.minuteMin;F<i;F+=b.minuteGrid){D++;I+="<td>"+(F<10?"0":"")+F+"</td>"}I+="</tr></table></div></dd>"}else I+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+k+'"'+(b.showMinute?"":' style="display:none;"')+"></dd>";I+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+k+'"'+(b.showSecond?"":' style="display:none;"')+">"+b.secondText+"</dt>";if(b.showSecond&&b.secondGrid>0){I+='<dd class="ui_tpicker_second ui_tpicker_second_'+b.secondGrid+'"><div id="ui_tpicker_second_'+
k+'"'+(b.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(F=b.secondMin;F<n;F+=b.secondGrid){m++;I+="<td>"+(F<10?"0":"")+F+"</td>"}I+="</tr></table></div></dd>"}else I+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+k+'"'+(b.showSecond?"":' style="display:none;"')+"></dd>";I+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+k+'"'+(b.showTimezone?"":' style="display:none;"')+">"+b.timezoneText+"</dt>";I+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+
k+'"'+(b.showTimezone?"":' style="display:none;"')+"></dd>";I+="</dl></div>";$tp=a(I);if(b.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+b.timeOnlyTitle+"</div></div>");c.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}this.hour_slider=$tp.find("#ui_tpicker_hour_"+k).slider({orientation:"horizontal",value:this.hour,min:b.hourMin,max:g,step:b.stepHour,slide:function(Z,$){f.hour_slider.slider("option","value",
$.value);f._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+k).slider({orientation:"horizontal",value:this.minute,min:b.minuteMin,max:i,step:b.stepMinute,slide:function(Z,$){f.minute_slider.slider("option","value",$.value);f._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+k).slider({orientation:"horizontal",value:this.second,min:b.secondMin,max:n,step:b.stepSecond,slide:function(Z,$){f.second_slider.slider("option","value",$.value);f._onTimeChange()}});this.timezone_select=
$tp.find("#ui_tpicker_timezone_"+k).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(b.timezoneList,function(Z){return a("<option />").val(typeof Z=="object"?Z.value:Z).text(typeof Z=="object"?Z.label:Z)}));this.timezone_select.val(typeof this.timezone!="undefined"&&this.timezone!=null&&this.timezone!=""?this.timezone:b.timezone);this.timezone_select.change(function(){f._onTimeChange()});if(b.showHour&&b.hourGrid>0){E=100*q*b.hourGrid/(g-b.hourMin);$tp.find(".ui_tpicker_hour table").css({width:E+
"%",marginLeft:E/(-2*q)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){var Z=a(this).html();if(b.ampm){var $=Z.substring(2).toLowerCase();Z=parseInt(Z.substring(0,2));Z=$=="a"?Z==12?0:Z:Z==12?12:Z+12}f.hour_slider.slider("option","value",Z);f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/q+"%",textAlign:"center",overflow:"hidden"})})}if(b.showMinute&&b.minuteGrid>0){E=100*D*b.minuteGrid/(i-b.minuteMin);$tp.find(".ui_tpicker_minute table").css({width:E+
"%",marginLeft:E/(-2*D)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){f.minute_slider.slider("option","value",a(this).html());f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/D+"%",textAlign:"center",overflow:"hidden"})})}b.showSecond&&b.secondGrid>0&&$tp.find(".ui_tpicker_second table").css({width:E+"%",marginLeft:E/(-2*m)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){f.second_slider.slider("option",
"value",a(this).html());f._onTimeChange();f._onSelectHandler()}).css({cursor:"pointer",width:100/m+"%",textAlign:"center",overflow:"hidden"})});g=c.find(".ui-datepicker-buttonpane");g.length?g.before($tp):c.append($tp);this.$timeObj=$tp.find("#ui_tpicker_time_"+k);if(this.inst!==null){c=this.timeDefined;this._onTimeChange();this.timeDefined=c}c=function(){f._onSelectHandler()};this.hour_slider.bind("slidestop",c);this.minute_slider.bind("slidestop",c);this.second_slider.bind("slidestop",c)}},_limitMinMaxDateTime:function(c,
b){var f=this._defaults,g=new Date(c.selectedYear,c.selectedMonth,c.selectedDay);if(this._defaults.showTimepicker){if(this._defaults.minDateTime!==null&&g){var i=this._defaults.minDateTime,n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null){this.hourMinOriginal=f.hourMin;this.minuteMinOriginal=f.minuteMin;this.secondMinOriginal=f.secondMin}if(c.settings.timeOnly||n.getTime()==g.getTime()){this._defaults.hourMin=
i.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=i.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=i.getSeconds()}else{if(this.second<this._defaults.secondMin)this.second=this._defaults.secondMin;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.hourMin=
this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}if(this._defaults.maxDateTime!==null&&g){i=this._defaults.maxDateTime;n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=f.hourMax;this.minuteMaxOriginal=f.minuteMax;this.secondMaxOriginal=f.secondMax}if(c.settings.timeOnly||n.getTime()==g.getTime()){this._defaults.hourMax=
i.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=i.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMin=i.getSeconds()}else{if(this.second>this._defaults.secondMax)this.second=this._defaults.secondMax;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.hourMax=
this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}if(b!==undefined&&b===true){this.hour_slider.slider("option",{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour);this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute);this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second)}}},
_onTimeChange:function(){var c=this.hour_slider?this.hour_slider.slider("value"):false,b=this.minute_slider?this.minute_slider.slider("value"):false,f=this.second_slider?this.second_slider.slider("value"):false,g=this.timezone_select?this.timezone_select.val():false;if(c!==false)c=parseInt(c,10);if(b!==false)b=parseInt(b,10);if(f!==false)f=parseInt(f,10);var i=c<12?"AM":"PM",n=c!=this.hour||b!=this.minute||f!=this.second||this.ampm.length>0&&this.ampm!=i||g!=this.timezone;if(n){if(c!==false)this.hour=
c;if(b!==false)this.minute=b;if(f!==false)this.second=f;if(g!==false)this.timezone=g;this._limitMinMaxDateTime(this.inst,true)}if(this._defaults.ampm)this.ampm=i;this._formatTime();this.$timeObj&&this.$timeObj.text(this.formattedTime);this.timeDefined=true;n&&this._updateDateTime()},_onSelectHandler:function(){var c=this._defaults.onSelect,b=this.$input?this.$input[0]:null;c&&b&&c.apply(b,[this.formattedDateTime,this])},_formatTime:function(c,b,f){if(f==undefined)f=this._defaults.ampm;c=c||{hour:this.hour,
minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var g=b||this._defaults.timeFormat.toString();if(f){var i=c.ampm=="AM"?c.hour:c.hour%12;i=Number(i)===0?12:i;g=g.toString().replace(/hh/g,(i<10?"0":"")+i).replace(/h/g,i).replace(/mm/g,(c.minute<10?"0":"")+c.minute).replace(/m/g,c.minute).replace(/ss/g,(c.second<10?"0":"")+c.second).replace(/s/g,c.second).replace(/TT/g,c.ampm.toUpperCase()).replace(/tt/g,c.ampm.toLowerCase()).replace(/T/g,c.ampm.charAt(0).toUpperCase()).replace(/t/g,
c.ampm.charAt(0).toLowerCase()).replace(/z/g,c.timezone)}else{g=g.toString().replace(/hh/g,(c.hour<10?"0":"")+c.hour).replace(/h/g,c.hour).replace(/mm/g,(c.minute<10?"0":"")+c.minute).replace(/m/g,c.minute).replace(/ss/g,(c.second<10?"0":"")+c.second).replace(/s/g,c.second).replace(/z/g,c.timezone);g=a.trim(g.replace(/t/gi,""))}if(arguments.length)return g;else this.formattedTime=g},_updateDateTime:function(c){c=this.inst||c;dt=new Date(c.selectedYear,c.selectedMonth,c.selectedDay);dateFmt=a.datepicker._get(c,
"dateFormat");formatCfg=a.datepicker._getFormatConfig(c);timeAvailable=dt!==null&&this.timeDefined;var b=this.formattedDate=a.datepicker.formatDate(dateFmt,dt===null?new Date:dt,formatCfg);if(!(c.lastVal!==undefined&&c.lastVal.length>0&&this.$input.val().length===0)){if(this._defaults.timeOnly===true)b=this.formattedTime;else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))b+=this._defaults.separator+this.formattedTime;this.formattedDateTime=b;if(this._defaults.showTimepicker)if(this.$altInput&&
this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else{this.$altInput&&this.$altInput.val(b);this.$input.val(b)}else this.$input.val(this.formattedDate);this.$input.trigger("change")}}});a.fn.extend({timepicker:function(c){c=c||{};var b=arguments;if(typeof c=="object")b[0]=a.extend(c,{timeOnly:true});return a(this).each(function(){a.fn.datetimepicker.apply(a(this),b)})},datetimepicker:function(c){c=c||{};var b=arguments;return typeof c==
"string"?c=="getDate"?a.fn.datepicker.apply(a(this[0]),b):this.each(function(){var f=a(this);f.datepicker.apply(f,b)}):this.each(function(){var f=a(this);f.datepicker(a.timepicker._newInst(f,c)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(c,b){var f=this._getInst(a(c)[0]),g=this._get(f,"timepicker");if(g){g._limitMinMaxDateTime(f,true);f.inline=f.stay_open=true;this._base_selectDate(c,b+g._defaults.separator+g.formattedTime);f.inline=f.stay_open=
false;this._notifyChange(f);this._updateDatepicker(f)}else this._base_selectDate(c,b)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(c){if(typeof c.stay_open!=="boolean"||c.stay_open===false){this._base_updateDatepicker(c);var b=this._get(c,"timepicker");b&&b._addTimePicker(c)}};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(c){var b=a.datepicker._getInst(c.target),f=a.datepicker._get(b,"timepicker");
if(f)if(a.datepicker._get(b,"constrainInput")){var g=f._defaults.ampm;b=f._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,g?"APM":"").replace(/T/g,g?"AP":"").replace(/tt/g,g?"apm":"").replace(/t/g,g?"ap":"")+" "+f._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(b,"dateFormat"));f=String.fromCharCode(c.charCode===undefined?c.keyCode:c.charCode);return c.ctrlKey||f<" "||!b||b.indexOf(f)>-1}return a.datepicker._base_doKeyPress(c)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;
a.datepicker._doKeyUp=function(c){var b=a.datepicker._getInst(c.target),f=a.datepicker._get(b,"timepicker");if(f)if(f._defaults.timeOnly&&b.input.val()!=b.lastVal)try{a.datepicker._updateDatepicker(b)}catch(g){a.datepicker.log(g)}return a.datepicker._base_doKeyUp(c)};a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(c){this._base_gotoToday(c);this._setTime(this._getInst(a(c)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(c){var b=this._getInst(c),
f=this._get(b,"timepicker");a(c).datepicker("getDate");if(f){f._defaults.showTimepicker=false;f._updateDateTime(b)}};a.datepicker._enableTimepickerDatepicker=function(c){var b=this._getInst(c),f=this._get(b,"timepicker");a(c).datepicker("getDate");if(f){f._defaults.showTimepicker=true;f._addTimePicker(b);f._updateDateTime(b)}};a.datepicker._setTime=function(c,b){var f=this._get(c,"timepicker");if(f){var g=f._defaults,i=b?b.getHours():g.hour,n=b?b.getMinutes():g.minute,k=b?b.getSeconds():g.second;
if(i<g.hourMin||i>g.hourMax||n<g.minuteMin||n>g.minuteMax||k<g.secondMin||k>g.secondMax){i=g.hourMin;n=g.minuteMin;k=g.secondMin}if(f.hour_slider)f.hour_slider.slider("value",i);else f.hour=i;if(f.minute_slider)f.minute_slider.slider("value",n);else f.minute=n;if(f.second_slider)f.second_slider.slider("value",k);else f.second=k;f._onTimeChange();f._updateDateTime(c)}};a.datepicker._setTimeDatepicker=function(c,b,f){c=this._getInst(c);var g=this._get(c,"timepicker");if(g){this._setDateFromField(c);
if(b){if(typeof b=="string"){g._parseTime(b,f);b=new Date;b.setHours(g.hour,g.minute,g.second)}else b=new Date(b.getTime());if(b.toString()=="Invalid Date")b=undefined;this._setTime(c,b)}}};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(c,b){var f=this._getInst(c),g=b instanceof Date?new Date(b.getTime()):b;this._updateDatepicker(f);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(c,g,true)};a.datepicker._base_getDateDatepicker=
a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(c,b){var f=this._getInst(c),g=this._get(f,"timepicker");if(g){this._setDateFromField(f,b);(f=this._getDate(f))&&g._parseTime(a(c).val(),true)&&f.setHours(g.hour,g.minute,g.second);return f}return this._base_getDateDatepicker(c,b)};a.timepicker=new d;a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var d=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var c=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+d++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(b){c.open(b)}).bind("blur.tooltip mouseleave.tooltip",function(b){c.close(b)})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(c){var b=
this.element;if(!(this.current&&this.current[0]==b[0])){var f=this;this.current=b;this.currentTitle=b.attr("title");var g=this.options.content.call(b[0],function(i){f.current==b&&f._show(c,b,i)});g&&f._show(c,b,g)}},_show:function(c,b,f){if(f){b.attr("title","");if(!this.options.disabled){this.tooltipContent.html(f);this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:b})).hide();this.tooltip.attr("aria-hidden","false");b.attr("aria-describedby",this.tooltip.attr("id"));
if(this.tooltip.is(":animated"))this.tooltip.stop().show().fadeTo("normal",this.opacity);else this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn();this._trigger("open",c)}}},close:function(c){if(this.current){var b=this.current.attr("title",this.currentTitle);this.current=null;if(!this.options.disabled){b.removeAttr("aria-describedby");this.tooltip.attr("aria-hidden","true");this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity",
"")}):this.tooltip.stop().fadeOut();this._trigger("close",c)}}}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(d){return(d?d:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(d){d.w.show()},closeModal:function(d){d.w.hide().attr("aria-hidden","true");d.o&&d.o.remove()},hideModal:function(d,c){c=a.extend({jqm:true,gb:""},c||{});if(c.onClose){var b=c.onClose(d);if(typeof b=="boolean"&&!b)return}if(a.fn.jqm&&c.jqm===true)a(d).attr("aria-hidden","true").jqmHide();else{if(c.gb!=="")try{a(".jqgrid-overlay:first",
c.gb).hide()}catch(f){}a(d).hide().attr("aria-hidden","true")}},findPos:function(d){var c=0,b=0;if(d.offsetParent){do{c+=d.offsetLeft;b+=d.offsetTop}while(d=d.offsetParent)}return[c,b]},createModal:function(d,c,b,f,g,i,n){var k=document.createElement("div"),I,q=this;n=a.extend({},n||{});I=a(b.gbox).attr("dir")=="rtl"?true:false;k.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";k.id=d.themodal;var D=document.createElement("div");D.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
D.id=d.modalhead;a(D).append("<span class='ui-jqdialog-title'>"+b.caption+"</span>");var m=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){m.addClass("ui-state-hover")},function(){m.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(D).append(m);if(I){k.dir="rtl";a(".ui-jqdialog-title",D).css("float","right");a(".ui-jqdialog-titlebar-close",D).css("left","0.3em")}else{k.dir="ltr";a(".ui-jqdialog-title",
D).css("float","left");a(".ui-jqdialog-titlebar-close",D).css("right","0.3em")}var E=document.createElement("div");a(E).addClass("ui-jqdialog-content ui-widget-content").attr("id",d.modalcontent);a(E).append(c);k.appendChild(E);a(k).prepend(D);if(i===true)a("body").append(k);else typeof i=="string"?a(i).append(k):a(k).insertBefore(f);a(k).css(n);if(typeof b.jqModal==="undefined")b.jqModal=true;c={};if(a.fn.jqm&&b.jqModal===true){if(b.left===0&&b.top===0&&b.overlay){n=[];n=this.findPos(g);b.left=n[0]+
4;b.top=n[1]+4}c.top=b.top+"px";c.left=b.left}else if(b.left!==0||b.top!==0){c.left=b.left;c.top=b.top+"px"}a("a.ui-jqdialog-titlebar-close",D).click(function(){var Z=a("#"+d.themodal).data("onClose")||b.onClose,$=a("#"+d.themodal).data("gbox")||b.gbox;q.hideModal("#"+d.themodal,{gb:$,jqm:b.jqModal,onClose:Z});return false});if(b.width===0||!b.width)b.width=300;if(b.height===0||!b.height)b.height=200;if(!b.zIndex){f=a(f).parents("*[role=dialog]").filter(":first").css("z-index");b.zIndex=f?parseInt(f,
10)+1:950}f=0;if(I&&c.left&&!i){f=a(b.gbox).width()-(!isNaN(b.width)?parseInt(b.width,10):0)-8;c.left=parseInt(c.left,10)+parseInt(f,10)}if(c.left)c.left+="px";a(k).css(a.extend({width:isNaN(b.width)?"auto":b.width+"px",height:isNaN(b.height)?"auto":b.height+"px",zIndex:b.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":d.modalhead,"aria-hidden":"true"});if(typeof b.drag=="undefined")b.drag=true;if(typeof b.resize=="undefined")b.resize=true;if(b.drag){a(D).css("cursor",
"move");if(a.fn.jqDrag)a(k).jqDrag(D);else try{a(k).draggable({handle:a("#"+D.id)})}catch(F){}}if(b.resize)if(a.fn.jqResize){a(k).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");a("#"+d.themodal).jqResize(".jqResize",d.scrollelm?"#"+d.scrollelm:false)}else try{a(k).resizable({handles:"se, sw",alsoResize:d.scrollelm?"#"+d.scrollelm:false})}catch(V){}b.closeOnEscape===true&&a(k).keydown(function(Z){if(Z.which==
27){Z=a("#"+d.themodal).data("onClose")||b.onClose;q.hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:Z})}})},viewModal:function(d,c){c=a.extend({toTop:true,overlay:10,modal:false,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},c||{});if(a.fn.jqm&&c.jqm===true)c.jqM?a(d).attr("aria-hidden","false").jqm(c).jqmShow():a(d).attr("aria-hidden","false").jqmShow();else{if(c.gbox!==""){a(".jqgrid-overlay:first",c.gbox).show();a(d).data("gbox",c.gbox)}a(d).show().attr("aria-hidden",
"false");try{a(":input:visible",d)[0].focus()}catch(b){}}},info_dialog:function(d,c,b,f){var g={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+d+"</b>",left:250,top:170,zIndex:1E3,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(g,f||{});var i=g.jqModal,n=this;if(a.fn.jqm&&!i)i=false;d="";if(g.buttons.length>0)for(f=0;f<g.buttons.length;f++){if(typeof g.buttons[f].id=="undefined")g.buttons[f].id="info_button_"+f;d+=
"<a href='javascript:void(0)' id='"+g.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+g.buttons[f].text+"</a>"}f=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px";var k="<div id='info_id'>";k+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+("text-align:"+g.align+";")+"'>"+c+"</div>";k+=b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
b+"</a>"+d+"</div>":d!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+d+"</div>":"";k+="</div>";try{a("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:i});a("#info_dialog").remove()}catch(I){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},k,g,"","",true);d&&a.each(g.buttons,
function(D){a("#"+this.id,"#info_id").bind("click",function(){g.buttons[D].onClick.call(a("#info_dialog"));return false})});a("#closedialog","#info_id").click(function(){n.hideModal("#info_dialog",{jqm:i});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(g.beforeOpen)&&g.beforeOpen();this.viewModal("#info_dialog",{onHide:function(D){D.w.hide().remove();D.o&&D.o.remove()},modal:g.modal,
jqm:i});a.isFunction(g.afterOpen)&&g.afterOpen();try{a("#info_dialog").focus()}catch(q){}},createEl:function(d,c,b,f,g){function i(E,F){a.isFunction(F.dataInit)&&F.dataInit(E);F.dataEvents&&a.each(F.dataEvents,function(){this.data!==undefined?a(E).bind(this.type,this.data,this.fn):a(E).bind(this.type,this.fn)});return F}function n(E,F,V){var Z=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];if(typeof V!="undefined"&&a.isArray(V))Z=a.extend(Z,V);a.each(F,
function($,Aa){a.inArray($,Z)===-1&&a(E).attr($,Aa)});F.hasOwnProperty("id")||a(E).attr("id",a.jgrid.randId())}var k="";switch(d){case "textarea":k=document.createElement("textarea");if(f)c.cols||a(k).css({width:"98%"});else if(!c.cols)c.cols=20;if(!c.rows)c.rows=2;if(b=="&nbsp;"||b=="&#160;"||b.length==1&&b.charCodeAt(0)==160)b="";k.value=b;n(k,c);c=i(k,c);a(k).attr({role:"textbox",multiline:"true"});break;case "checkbox":k=document.createElement("input");k.type="checkbox";if(c.value){d=c.value.split(":");
if(b===d[0]){k.checked=true;k.defaultChecked=true}k.value=d[0];a(k).attr("offval",d[1])}else{d=b.toLowerCase();if(d.search(/(false|0|no|off|undefined)/i)<0&&d!==""){k.checked=true;k.defaultChecked=true;k.value=b}else k.value="on";a(k).attr("offval","off")}n(k,c,["value"]);c=i(k,c);a(k).attr("role","checkbox");break;case "select":k=document.createElement("select");k.setAttribute("role","select");f=[];if(c.multiple===true){d=true;k.multiple="multiple";a(k).attr("aria-multiselectable","true")}else d=
false;if(typeof c.dataUrl!="undefined")a.ajax(a.extend({url:c.dataUrl,type:"GET",dataType:"html",context:{elem:k,options:c,vl:b},success:function(E){var F=[],V=this.elem,Z=this.vl,$=a.extend({},this.options),Aa=$.multiple===true;if(typeof $.buildSelect!="undefined")E=$.buildSelect(E);if(E=a(E).html()){a(V).append(E);n(V,$);$=i(V,$);if(typeof $.size==="undefined")$.size=Aa?3:1;if(Aa){F=Z.split(",");F=a.map(F,function(Da){return a.trim(Da)})}else F[0]=a.trim(Z);setTimeout(function(){a("option",V).each(function(){a(this).attr("role",
"option");if(a.inArray(a.trim(a(this).text()),F)>-1||a.inArray(a.trim(a(this).val()),F)>-1)this.selected="selected"})},0)}}},g||{}));else if(c.value){var I;if(d){f=b.split(",");f=a.map(f,function(E){return a.trim(E)});if(typeof c.size==="undefined")c.size=3}else c.size=1;if(typeof c.value==="function")c.value=c.value();var q,D;if(typeof c.value==="string"){q=c.value.split(";");for(I=0;I<q.length;I++){D=q[I].split(":");if(D.length>2)D[1]=a.map(D,function(E,F){if(F>0)return E}).join(":");g=document.createElement("option");
g.setAttribute("role","option");g.value=D[0];g.innerHTML=D[1];if(!d&&(a.trim(D[0])==a.trim(b)||a.trim(D[1])==a.trim(b)))g.selected="selected";if(d&&(a.inArray(a.trim(D[1]),f)>-1||a.inArray(a.trim(D[0]),f)>-1))g.selected="selected";k.appendChild(g)}}else if(typeof c.value==="object"){q=c.value;for(I in q)if(q.hasOwnProperty(I)){g=document.createElement("option");g.setAttribute("role","option");g.value=I;g.innerHTML=q[I];if(!d&&(a.trim(I)==a.trim(b)||a.trim(q[I])==a.trim(b)))g.selected="selected";if(d&&
(a.inArray(a.trim(q[I]),f)>-1||a.inArray(a.trim(I),f)>-1))g.selected="selected";k.appendChild(g)}}n(k,c,["value"]);c=i(k,c)}break;case "text":case "password":case "button":I=d=="button"?"button":"textbox";k=document.createElement("input");k.type=d;k.value=b;n(k,c);c=i(k,c);if(d!="button")if(f)c.size||a(k).css({width:"98%"});else if(!c.size)c.size=20;a(k).attr("role",I);break;case "image":case "file":k=document.createElement("input");k.type=d;n(k,c);c=i(k,c);break;case "custom":k=document.createElement("span");
try{if(a.isFunction(c.custom_element))if(q=c.custom_element.call(this,b,c)){q=a(q).addClass("customelement").attr({id:c.id,name:c.name});a(k).empty().append(q)}else throw"e2";else throw"e1";}catch(m){m=="e1"&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose);m=="e2"?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,typeof m==="string"?
m:m.message,a.jgrid.edit.bClose)}}return k},checkDate:function(d,c){var b={},f;d=d.toLowerCase();f=d.indexOf("/")!=-1?"/":d.indexOf("-")!=-1?"-":d.indexOf(".")!=-1?".":"/";d=d.split(f);c=c.split(f);if(c.length!=3)return false;f=-1;for(var g,i=-1,n=-1,k=0;k<d.length;k++){g=isNaN(c[k])?0:parseInt(c[k],10);b[d[k]]=g;g=d[k];if(g.indexOf("y")!=-1)f=k;if(g.indexOf("m")!=-1)n=k;if(g.indexOf("d")!=-1)i=k}g=d[f]=="y"||d[f]=="yyyy"?4:d[f]=="yy"?2:-1;k=function(q){for(var D=1;D<=q;D++){this[D]=31;if(D==4||D==
6||D==9||D==11)this[D]=30;if(D==2)this[D]=29}return this}(12);var I;if(f===-1)return false;else{I=b[d[f]].toString();if(g==2&&I.length==1)g=1;if(I.length!=g||b[d[f]]===0&&c[f]!="00")return false}if(n===-1)return false;else{I=b[d[n]].toString();if(I.length<1||b[d[n]]<1||b[d[n]]>12)return false}if(i===-1)return false;else{I=b[d[i]].toString();if(I.length<1||b[d[i]]<1||b[d[i]]>31||b[d[n]]==2&&b[d[i]]>(b[d[f]]%4===0&&(b[d[f]]%100!==0||b[d[f]]%400===0)?29:28)||b[d[i]]>k[b[d[n]]])return false}return true},
isEmpty:function(d){return d.match(/^\s+$/)||d===""?true:false},checkTime:function(d){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(d))if(d=d.match(c)){if(d[3]){if(d[1]<1||d[1]>12)return false}else if(d[1]>23)return false;if(d[2]>59)return false}else return false;return true},checkValues:function(d,c,b,f,g){var i,n;if(typeof f==="undefined")if(typeof c=="string"){f=0;for(g=b.p.colModel.length;f<g;f++)if(b.p.colModel[f].name==c){i=b.p.colModel[f].editrules;c=f;try{n=b.p.colModel[f].formoptions.label}catch(k){}break}}else{if(c>=
0)i=b.p.colModel[c].editrules}else{i=f;n=g===undefined?"_":g}if(i){n||(n=b.p.colNames[c]);if(i.required===true)if(this.isEmpty(d))return[false,n+": "+a.jgrid.edit.msg.required,""];f=i.required===false?false:true;if(i.number===true)if(!(f===false&&this.isEmpty(d)))if(isNaN(d))return[false,n+": "+a.jgrid.edit.msg.number,""];if(typeof i.minValue!="undefined"&&!isNaN(i.minValue))if(parseFloat(d)<parseFloat(i.minValue))return[false,n+": "+a.jgrid.edit.msg.minValue+" "+i.minValue,""];if(typeof i.maxValue!=
"undefined"&&!isNaN(i.maxValue))if(parseFloat(d)>parseFloat(i.maxValue))return[false,n+": "+a.jgrid.edit.msg.maxValue+" "+i.maxValue,""];if(i.email===true)if(!(f===false&&this.isEmpty(d))){g=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;
if(!g.test(d))return[false,n+": "+a.jgrid.edit.msg.email,""]}if(i.integer===true)if(!(f===false&&this.isEmpty(d))){if(isNaN(d))return[false,n+": "+a.jgrid.edit.msg.integer,""];if(d%1!==0||d.indexOf(".")!=-1)return[false,n+": "+a.jgrid.edit.msg.integer,""]}if(i.date===true)if(!(f===false&&this.isEmpty(d))){c=b.p.colModel[c].formatoptions&&b.p.colModel[c].formatoptions.newformat?b.p.colModel[c].formatoptions.newformat:b.p.colModel[c].datefmt||"Y-m-d";if(!this.checkDate(c,d))return[false,n+": "+a.jgrid.edit.msg.date+
" - "+c,""]}if(i.time===true)if(!(f===false&&this.isEmpty(d)))if(!this.checkTime(d))return[false,n+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(i.url===true)if(!(f===false&&this.isEmpty(d))){g=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!g.test(d))return[false,n+": "+a.jgrid.edit.msg.url,""]}if(i.custom===true)if(!(f===false&&this.isEmpty(d)))if(a.isFunction(i.custom_func)){d=i.custom_func.call(b,d,n);return a.isArray(d)?
d:[false,a.jgrid.edit.msg.customarray,""]}else return[false,a.jgrid.edit.msg.customfcheck,""]}return[true,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(d){if(typeof d==="string"){var c=a.fn.jqFilter[d];if(!c)throw"jqFilter - No such method: "+d;var b=a.makeArray(arguments).slice(1);return c.apply(this,b)}var f=a.extend(true,{filter:null,columns:[],onChange:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:["AND","OR"],groupButton:true},d||{});return this.each(function(){if(!this.filter){this.p=f;if(this.p.filter===null||this.p.filter===undefined)this.p.filter={groupOp:this.p.groupOps[0],
rules:[],groups:[]};var g,i=this.p.columns.length,n,k=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(g=0;g<this.p._gridsopt.length;g++)this.p.ops[g].description=this.p._gridsopt[g];this.p.initFilter=a.extend(true,{},this.p.filter);if(i){for(g=0;g<i;g++){n=this.p.columns[g];if(n.stype)n.inputtype=n.stype;else if(!n.inputtype)n.inputtype="text";if(n.sorttype)n.searchtype=n.sorttype;else if(!n.searchtype)n.searchtype="string";if(n.hidden===undefined)n.hidden=false;if(!n.label)n.label=
n.name;if(n.index)n.name=n.index;if(!n.hasOwnProperty("searchoptions"))n.searchoptions={};if(!n.hasOwnProperty("searchrules"))n.searchrules={}}this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var I=function(q,D){var m=[true,""];if(a.isFunction(D.searchrules))m=D.searchrules(q,D);else if(a.jgrid&&a.jgrid.checkValues)try{m=a.jgrid.checkValues(q,-1,
null,D.searchrules,D.label)}catch(E){}if(m&&m.length&&m[0]===false){f.error=!m[0];f.errmsg=m[1]}};this.onchange=function(){this.p.error=false;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):false};this.reDraw=function(){a("table.group:first",this).remove();var q=this.createTableForGroup(f.filter,null);a(this).append(q)};this.createTableForGroup=function(q,D){var m=this,E,F=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");
D===null&&a(F).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");var V=a("<tr></tr>");a(F).append(V);var Z=a("<th colspan='5' align='left'></th>");V.append(Z);var $=a("<select class='opsel'></select>");Z.append($);V="";var Aa;for(E=0;E<f.groupOps.length;E++){Aa=q.groupOp===m.p.groupOps[E]?" selected='selected'":"";V+="<option value='"+m.p.groupOps[E]+"'"+Aa+">"+m.p.groupOps[E]+"</option>"}$.append(V).bind("change",function(){q.groupOp=
a($).val();m.onchange()});V="<span></span>";if(this.p.groupButton){V=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>");V.bind("click",function(){if(q.groups===undefined)q.groups=[];q.groups.push({groupOp:f.groupOps[0],rules:[],groups:[]});m.reDraw();m.onchange();return false})}Z.append(V);V=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");var Da;V.bind("click",function(){if(q.rules===undefined)q.rules=[];for(E=0;E<m.p.columns.length;E++){var Fa=
typeof m.p.columns[E].search==="undefined"?true:m.p.columns[E].search,Pa=m.p.columns[E].hidden===true;if(m.p.columns[E].searchoptions.searchhidden===true&&Fa||Fa&&!Pa){Da=m.p.columns[E];break}}q.rules.push({field:Da.name,op:(Da.searchoptions.sopt?Da.searchoptions.sopt:m.p.sopt?m.p.sopt:Da.searchtype==="string"?m.p.stropts:m.p.numopts)[0],data:""});m.reDraw();return false});Z.append(V);if(D!==null){V=a("<input type='button' value='-' title='Delete group' class='delete-group'/>");Z.append(V);V.bind("click",
function(){for(E=0;E<D.groups.length;E++)if(D.groups[E]===q){D.groups.splice(E,1);break}m.reDraw();m.onchange();return false})}if(q.groups!==undefined)for(E=0;E<q.groups.length;E++){Z=a("<tr></tr>");F.append(Z);V=a("<td class='first'></td>");Z.append(V);V=a("<td colspan='4'></td>");V.append(this.createTableForGroup(q.groups[E],q));Z.append(V)}if(q.groupOp===undefined)q.groupOp=m.p.groupOps[0];if(q.rules!==undefined)for(E=0;E<q.rules.length;E++)F.append(this.createTableRowForRule(q.rules[E],q));return F};
this.createTableRowForRule=function(q,D){var m=this,E=a("<tr></tr>"),F,V,Z,$,Aa="",Da;E.append("<td class='first'></td>");var Fa=a("<td class='columns'></td>");E.append(Fa);var Pa=a("<select></select>"),Ia,Va=[];Fa.append(Pa);Pa.bind("change",function(){q.field=a(Pa).val();Z=a(this).parents("tr:first");for(F=0;F<m.p.columns.length;F++)if(m.p.columns[F].name===q.field){$=m.p.columns[F];break}if($){$.searchoptions.id=a.jgrid.randId();if(k&&$.inputtype==="text")if(!$.searchoptions.size)$.searchoptions.size=
10;var La=a.jgrid.createEl($.inputtype,$.searchoptions,"",true,m.p.ajaxSelectOptions,true);a(La).addClass("input-elm");V=$.searchoptions.sopt?$.searchoptions.sopt:m.p.sopt?m.p.sopt:$.searchtype==="string"?m.p.stropts:m.p.numopts;var Ra="",Xa="";Va=[];a.each(m.p.ops,function(){Va.push(this.name)});for(F=0;F<V.length;F++){Ia=a.inArray(V[F],Va);if(Ia!==-1){Xa="";if(F===0){q.op=m.p.ops[Ia].name;Xa=" selected='selected'"}Ra+="<option value='"+m.p.ops[Ia].name+"'"+Xa+">"+m.p.ops[Ia].description+"</option>"}}a(".selectopts",
Z).empty().append(Ra);a(".data",Z).empty().append(La);a(".input-elm",Z).bind("change",function(){q.data=a(this).val();m.onchange()});setTimeout(function(){q.data=a(La).val();m.onchange()},0)}});for(F=Fa=0;F<m.p.columns.length;F++){Da=typeof m.p.columns[F].search==="undefined"?true:m.p.columns[F].search;var bb=m.p.columns[F].hidden===true;if(m.p.columns[F].searchoptions.searchhidden===true&&Da||Da&&!bb){Da="";if(q.field===m.p.columns[F].name){Da=" selected='selected'";Fa=F}Aa+="<option value='"+m.p.columns[F].name+
"'"+Da+">"+m.p.columns[F].label+"</option>"}}Pa.append(Aa);Aa=a("<td class='operators'></td>");E.append(Aa);$=f.columns[Fa];$.searchoptions.id=a.jgrid.randId();if(k&&$.inputtype==="text")if(!$.searchoptions.size)$.searchoptions.size=10;Fa=a.jgrid.createEl($.inputtype,$.searchoptions,q.data,true,m.p.ajaxSelectOptions,true);var Qa=a("<select class='selectopts'></select>");Aa.append(Qa);Qa.bind("change",function(){q.op=a(Qa).val();Z=a(this).parents("tr:first");var La=a(".input-elm",Z)[0];if(q.op==="nu"||
q.op==="nn"){q.data="";La.value="";La.setAttribute("readonly","true");La.setAttribute("disabled","true")}else{La.removeAttribute("readonly");La.removeAttribute("disabled")}m.onchange()});V=$.searchoptions.sopt?$.searchoptions.sopt:m.p.sopt?m.p.sopt:$.searchtype==="string"?f.stropts:m.p.numopts;Aa="";a.each(m.p.ops,function(){Va.push(this.name)});for(F=0;F<V.length;F++){Ia=a.inArray(V[F],Va);if(Ia!==-1){Da=q.op===m.p.ops[Ia].name?" selected='selected'":"";Aa+="<option value='"+m.p.ops[Ia].name+"'"+
Da+">"+m.p.ops[Ia].description+"</option>"}}Qa.append(Aa);Aa=a("<td class='data'></td>");E.append(Aa);Aa.append(Fa);a(Fa).addClass("input-elm").bind("change",function(){q.data=a(this).val();m.onchange()});Aa=a("<td></td>");E.append(Aa);Fa=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");Aa.append(Fa);Fa.bind("click",function(){for(F=0;F<D.rules.length;F++)if(D.rules[F]===q){D.rules.splice(F,1);break}m.reDraw();m.onchange();return false});return E};this.getStringForGroup=
function(q){var D="(",m;if(q.groups!==undefined)for(m=0;m<q.groups.length;m++){if(D.length>1)D+=" "+q.groupOp+" ";try{D+=this.getStringForGroup(q.groups[m])}catch(E){alert(E)}}if(q.rules!==undefined)try{for(m=0;m<q.rules.length;m++){if(D.length>1)D+=" "+q.groupOp+" ";D+=this.getStringForRule(q.rules[m])}}catch(F){alert(F)}D+=")";return D==="()"?"":D};this.getStringForRule=function(q){var D="",m="",E,F;for(E=0;E<this.p.ops.length;E++)if(this.p.ops[E].name===q.op){D=this.p.ops[E].operator;m=this.p.ops[E].name;
break}for(E=0;E<this.p.columns.length;E++)if(this.p.columns[E].name===q.field){F=this.p.columns[E];break}E=q.data;if(m==="bw"||m==="bn")E+="%";if(m==="ew"||m==="en")E="%"+E;if(m==="cn"||m==="nc")E="%"+E+"%";if(m==="in"||m==="ni")E=" ("+E+")";f.errorcheck&&I(q.data,F);return a.inArray(F.searchtype,["int","integer","float","number","currency"])!==-1||m==="nn"||m==="nu"?q.field+" "+D+" "+E:q.field+" "+D+' "'+E+'"'};this.resetFilter=function(){this.p.filter=a.extend(true,{},this.p.initFilter);this.reDraw();
this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function q(m){var E="(",F;if(m.groups!==undefined)for(F=0;F<m.groups.length;F++){if(E.length>1)E+=m.groupOp==="OR"?" || ":" && ";E+=q(m.groups[F])}if(m.rules!==undefined)for(F=0;F<m.rules.length;F++){if(E.length>
1)E+=m.groupOp==="OR"?" || ":" && ";var V=m.rules[F];if(D.p.errorcheck){var Z=void 0,$=void 0;for(Z=0;Z<D.p.columns.length;Z++)if(D.p.columns[Z].name===V.field){$=D.p.columns[Z];break}$&&I(V.data,$)}E+=V.op+"(item."+V.field+",'"+V.data+"')"}E+=")";return E==="()"?"":E}var D=this;return q(this.p.filter)};this.reDraw();if(this.p.showQuery)this.onchange();this.filter=true}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var d="";this.each(function(){d=this.toUserFriendlyString()});return d},filterData:function(){var d;
this.each(function(){d=this.p.filter});return d},getParameter:function(d){if(d!==undefined)if(this.p.hasOwnProperty(d))return this.p[d];return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(d){if(typeof d==="string")d=jQuery.jgrid.parse(d);this.each(function(){this.p.filter=d;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,d){if(a.nodeType===9)a=a.documentElement;var c=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,d){var c=function(g,i,n){var k="",I,q;if(g instanceof Array)if(g.length===0)k+=n+"<"+i+">__EMPTY_ARRAY_</"+i+">\n";else{I=0;for(q=g.length;I<q;I+=1){var D=n+c(g[I],i,n+"\t")+"\n";k+=D}}else if(typeof g==="object"){I=false;k+=n+"<"+i;for(q in g)if(g.hasOwnProperty(q))if(q.charAt(0)===
"@")k+=" "+q.substr(1)+'="'+g[q].toString()+'"';else I=true;k+=I?">":"/>";if(I){for(q in g)if(g.hasOwnProperty(q))if(q==="#text")k+=g[q];else if(q==="#cdata")k+="<![CDATA["+g[q]+"]]\>";else if(q.charAt(0)!=="@")k+=c(g[q],q,n+"\t");k+=(k.charAt(k.length-1)==="\n"?n:"")+"</"+i+">"}}else k+=typeof g==="function"?n+"<"+i+"><![CDATA["+g+"]]\></"+i+">":g.toString()==='""'||g.toString().length===0?n+"<"+i+">__EMPTY_STRING_</"+i+">":n+"<"+i+">"+g.toString()+"</"+i+">";return k},b="",f;for(f in a)if(a.hasOwnProperty(f))b+=
c(a[f],f,"");return d?b.replace(/\t/g,d):b.replace(/\t|\n/g,"")},toObj:function(a){var d={},c=/function/i;if(a.nodeType===1){if(a.attributes.length){var b;for(b=0;b<a.attributes.length;b+=1)d["@"+a.attributes[b].nodeName]=(a.attributes[b].nodeValue||"").toString()}if(a.firstChild){var f=b=0,g=false,i;for(i=a.firstChild;i;i=i.nextSibling)if(i.nodeType===1)g=true;else if(i.nodeType===3&&i.nodeValue.match(/[^ \f\n\r\t\v]/))b+=1;else if(i.nodeType===4)f+=1;if(g)if(b<2&&f<2){this.removeWhite(a);for(i=
a.firstChild;i;i=i.nextSibling)if(i.nodeType===3)d["#text"]=this.escape(i.nodeValue);else if(i.nodeType===4)if(c.test(i.nodeValue))d[i.nodeName]=[d[i.nodeName],i.nodeValue];else d["#cdata"]=this.escape(i.nodeValue);else if(d[i.nodeName])if(d[i.nodeName]instanceof Array)d[i.nodeName][d[i.nodeName].length]=this.toObj(i);else d[i.nodeName]=[d[i.nodeName],this.toObj(i)];else d[i.nodeName]=this.toObj(i)}else if(a.attributes.length)d["#text"]=this.escape(this.innerXml(a));else d=this.escape(this.innerXml(a));
else if(b)if(a.attributes.length)d["#text"]=this.escape(this.innerXml(a));else{d=this.escape(this.innerXml(a));if(d==="__EMPTY_ARRAY_")d="[]";else if(d==="__EMPTY_STRING_")d=""}else if(f)if(f>1)d=this.escape(this.innerXml(a));else for(i=a.firstChild;i;i=i.nextSibling)if(c.test(a.firstChild.nodeValue)){d=a.firstChild.nodeValue;break}else d["#cdata"]=this.escape(i.nodeValue)}if(!a.attributes.length&&!a.firstChild)d=null}else if(a.nodeType===9)d=this.toObj(a.documentElement);else alert("unhandled node type: "+
a.nodeType);return d},toJson:function(a,d,c,b){if(b===undefined)b=true;var f=d?'"'+d+'"':"",g="\t",i="\n";if(!b)i=g="";if(a==="[]")f+=d?":[]":"[]";else if(a instanceof Array){var n,k,I=[];k=0;for(n=a.length;k<n;k+=1)I[k]=this.toJson(a[k],"",c+g,b);f+=(d?":[":"[")+(I.length>1?i+c+g+I.join(","+i+c+g)+i+c:I.join(""))+"]"}else if(a===null)f+=(d&&":")+"null";else if(typeof a==="object"){n=[];for(k in a)if(a.hasOwnProperty(k))n[n.length]=this.toJson(a[k],k,c+g,b);f+=(d?":{":"{")+(n.length>1?i+c+g+n.join(","+
i+c+g)+i+c:n.join(""))+"}"}else f+=typeof a==="string"?(d&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(d&&":")+'"'+a.toString()+'"';return f},innerXml:function(a){var d="";if("innerHTML"in a)d=a.innerHTML;else{var c=function(b){var f="",g;if(b.nodeType===1){f+="<"+b.nodeName;for(g=0;g<b.attributes.length;g+=1)f+=" "+b.attributes[g].nodeName+'="'+(b.attributes[g].nodeValue||"").toString()+'"';if(b.firstChild){f+=">";for(g=b.firstChild;g;g=g.nextSibling)f+=c(g);f+="</"+b.nodeName+">"}else f+=
"/>"}else if(b.nodeType===3)f+=b.nodeValue;else if(b.nodeType===4)f+="<![CDATA["+b.nodeValue+"]]\>";return f};for(a=a.firstChild;a;a=a.nextSibling)d+=c(a)}return d},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var d;for(d=a.firstChild;d;)if(d.nodeType===3)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var c=d.nextSibling;a.removeChild(d);d=c}else{d.nodeType===1&&this.removeWhite(d);
d=d.nextSibling}return a}};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},_viewmode_:false,searchCols:[],searchOpers:[],gotoDayEventView:function(d){a("#b_search_cal").trigger("click");d=a.fullCalendar.parseDate(parseInt(d,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",
d.getFullYear(),d.getMonth(),d.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},eventEditDialog:function(d){var c=a(a.jqschedule.eventid);a("input,textarea,select",c).val("");d.allDay?a("#endtime, #starttime",c).hide():a("#endtime, #starttime",c).show();a("#all_day",c).attr("checked",d.allDay);a("#title",c).val(d.title);setTimeout(function(){a("#description",c).val(d.description)},100);a("#location",c).val(d.location);a("#categories",c).val(d.className);a("#access",c).val(d.access);
a("#start",c).val(a.fullCalendar.formatDate(d.start,a.jqschedule.locales.dateFormat));a("#starttime",c).val(a.fullCalendar.formatDate(d.start,"HH:mm"));a("#end",c).val(a.fullCalendar.formatDate(d.end?d.end:d.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(d.end?d.end:d.start,"HH:mm"));var b={},f=a("#start",c).datepicker("option","dateFormat"),g;if(a.jqschedule._viewmode_)b[a.jqschedule.locales.bClose]=function(){c.dialog("close")};else{b[a.jqschedule.locales.bSave]=
function(){var i=a.datepicker.parseDate(f,a("#start",c).val()),n=a("#starttime",c).val();n=n?n.split(":"):["0","0"];i.setHours(parseInt(n[0],10),parseInt(n[1],10));(n=a.datepicker.parseDate(f,a("#end",c).val()))||(n=a.datepicker.parseDate(f,a("#start",c).val()));var k=a("#endtime",c).val();k=k?k.split(":"):["0","0"];n.setHours(parseInt(k[0],10),parseInt(k[1],10));if(n.getTime()-i.getTime()<0)alert("End time is little than start time");else{d.start=i;d._start=i;d.end=n;d._end=n;d.allDay=a("#all_day",
c).attr("checked")?true:false;d.title=a("#title",c).val();if(a.trim(d.title)=="")alert("Title is required");else{d.description=a("#description",c).val();d.location=a("#location",c).val();d.className=a("#categories",c).val();d.access=a("#access",c).val();g={};g.event_id=d.id;g.start=d.start.getTime()/1E3;g.end=d.end.getTime()/1E3;g.title=d.title;g.description=d.description;g.location=d.location;g.categories=a("#categories",c).val();g.access=d.access;g.all_day=d.allDay?1:0;g.oper="editEvent";a.ajax({url:a.jqschedule.calendarurl,
data:g,dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("updateEvent",d);c.dialog("close")}})}}};b[a.jqschedule.locales.bDelete]=function(){g={};g.event_id=d.id;g.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:g,dataType:"json",type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",d.id);c.dialog("close")};b[a.jqschedule.locales.bCancel]=function(){c.dialog("close")}}c.dialog({modal:true,width:490,closeOnEscape:false,position:{at:"center bottom",
of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){c.dialog("destroy");c.hide();c=null;a.jqschedule._viewmode_=false},buttons:b}).show();a(".ui-dialog").css("font-size","12px");return false},eventAddDialog:function(d,c){var b=a(a.jqschedule.eventid);a("input,textarea,select",b).val("");c?a("#endtime, #starttime",b).hide():a("#endtime, #starttime",b).show();a("#all_day",b).attr("checked",c);setTimeout(function(){a("#description",b).val("")},100);a("#start",b).val(a.fullCalendar.formatDate(d,
a.jqschedule.locales.dateFormat));a("#starttime",b).val(a.fullCalendar.formatDate(d,"HH:mm"));a("#end",b).val(a.fullCalendar.formatDate(d,a.jqschedule.locales.dateFormat));a("#endtime",b).val(a.fullCalendar.formatDate(d,"HH:mm"));var f={},g=a("#start",b).datepicker("option","dateFormat"),i,n;f[a.jqschedule.locales.bAdd]=function(){n={};var k=a.datepicker.parseDate(g,a("#start",b).val()),I=a("#starttime",b).val();I=I?I.split(":"):["0","0"];k.setHours(parseInt(I[0],10),parseInt(I[1],10));(I=a.datepicker.parseDate(g,
a("#end",b).val()))||(I=a.datepicker.parseDate(g,a("#start",b).val()));var q=a("#endtime").val();q=q?q.split(":"):["0","0"];I.setHours(parseInt(q[0],10),parseInt(q[1],10));if(I.getTime()-k.getTime()<0)alert("End time is little than start time");else{n.start=k;n._start=k;n.end=I;n._end=I;n.allDay=a("#all_day",b).attr("checked")?true:false;n.title=a("#title",b).val();if(a.trim(n.title)=="")alert("Title is required");else{n.description=a("#description",b).val();n.location=a("#location",b).val();n.className=
a("#categories",b).val();n.access=a("#access",b).val();i={};i.start=n.start.getTime()/1E3;i.end=n.end.getTime()/1E3;i.title=n.title;i.description=n.description;i.location=n.location;i.categories=a("#categories",b).val();i.access=n.access;i.all_day=n.allDay?1:0;i.oper="newEvent";a.ajax({url:a.jqschedule.calendarurl,data:i,dataType:"json",type:"POST",success:function(D){if(D.event_id){n.id=D.event_id;n._id=D.event_id;a(a.jqschedule.calendarid).fullCalendar("renderEvent",n,false);b.dialog("close")}}})}}};
f[a.jqschedule.locales.bCancel]=function(){b.dialog("close")};b.dialog({modal:true,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:false,title:a.jqschedule.locales.addCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:f}).show();a(".ui-dialog").css("font-size","12px")},eventLoading:function(){},eventDrop:function(d,c,b,f){if(d.end==null)d.end=d.start;a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",event_id:d.id,start:d.start.getTime()/
1E3,end:d.end.getTime()/1E3,all_day:f?1:0},dataType:"json",type:"post"})},eventResize:function(d){a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:d.id,start:d.start.getTime()/1E3,end:d.end.getTime()/1E3},dataType:"json",type:"post"})},eventRender:function(d,c){try{d.description&&c.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:c},content:function(){return d.description}})}catch(b){}},changeCalendarUser:function(){var d=a("#caluser");d.dialog({modal:true,
width:400,title:a.jqschedule.locales.userCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:[{text:a.jqschedule.locales.bChange,click:function(){var c=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:c,oper:"switchUser"},dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();a("#cal_user").html(a("#switchuser option:selected").text())}});
d.dialog("close")}},{text:a.jqschedule.locales.bCancel,click:function(){d.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px");return false},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var d=a("#common_search").val(),c="simple";if(d==""){c="complex";var b=a("#search_cal");if(b){b=b.jqFilter("filterData");if(!b.rules.length)return false;try{d=xmlJsonClass.toJson(b,"","",false)}catch(f){try{d=JSON.stringify(b)}catch(g){}}}}window.location=
a.jqschedule.calendarurl+"?oper=printEvents&stype="+c+"&search=true&svalue="+d}else{c=jQuery(a.jqschedule.calendarid).fullCalendar("getView");d=c.start.getTime()/1E3;c=c.end.getTime()/1E3;window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+d+"&end="+c}return false},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var d=a("#common_search").val(),c="simple";if(d==""){c="complex";var b=a("#search_cal");if(b){b=b.jqFilter("filterData");if(!b.rules.length)return false;
try{d=xmlJsonClass.toJson(b,"","",false)}catch(f){try{d=JSON.stringify(b)}catch(g){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+c+"&search=true&svalue="+d}else{c=jQuery(a.jqschedule.calendarid).fullCalendar("getView");d=c.start.getTime()/1E3;c=c.end.getTime()/1E3;window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+d+"&end="+c}return false},showSearch:function(){if(a("#common_search").val()){a("#common_search").val("");a("#b_common_search").trigger("click")}a(this).addClass("ui-state-active");
a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var d=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();a(".fc-view-"+d).show()},_filSearchTable:function(d){a("#search_table").empty();if(d&&d.length){a(".fnd-results").html(d.length);var c="";a.each(d,function(){var b=a.fullCalendar.parseDate(this.start),
f=a.fullCalendar.parseDate(this.end),g=a.fullCalendar.formatDate(b,"HH:mm"),i=a.fullCalendar.formatDate(f,"HH:mm");g=this.allDay?"all day":g+" - "+i;b=a.fullCalendar.formatDate(b,"ddd  dd MMM yyyy");f=a.fullCalendar.formatDate(f,"ddd  dd MMM yyyy");if(b!=f)g+=" "+f;c+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+this.start+"');\">"+b+"</a></th><td class='ui-event-time ui-widget-content'>"+g+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+
this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";c+="<td class='source' style='display:none;'>";c+=this.id+"~`"+this.title+"~`"+this.start+"~`"+this.end+"~`"+this.description+"~`"+this.location+"~`"+this.className+"~`"+this.access+"~`"+this.allDay+"~`"+this.user_id;c+="</td>";c+="</tr>"});a("#search_table").append(c)}},doSimpleSearch:function(){var d=a("#common_search").val();if(d)a.ajax({url:a.jqschedule.calendarurl,data:{search:true,stype:"simple",
svalue:d,oper:"getEvent"},dataType:"json",type:"POST",success:function(c){a.jqschedule._filSearchTable(c)}});else{a(".fnd-results").html("");a("#search_table").empty()}},buildLocalSearch:function(){var d,c;a("label",a.jqschedule.eventid).each(function(b){d={};d.name=a(this).attr("for");d.label=a(this).html();if(d.name=="categories"||d.name=="access"){d.inputtype="select";c={};a("#"+d.name+" option",a.jqschedule.eventid).each(function(){c[a(this).val()]=a(this).text()});d.searchoptions={value:c}}else if(d.name==
"all_day"){d.inputtype="select";c={"1":"Yes","0":"No"};d.searchoptions={value:c}}else if(d.name=="start"||d.name=="end"){d.searchtype="date";d.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(f){a(f).datetimepicker()}}}else d.searchoptions={size:20};a.jqschedule.searchCols[b]=d})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,filter:{groupOp:"AND",rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});
a("#search_cal").dialog({modal:true,width:"auto",autoOpen:false,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var d=a("#search_cal"),c,b=d.jqFilter("filterData");if(b.rules.length){try{c=xmlJsonClass.toJson(b,"","",false)}catch(f){try{c=JSON.stringify(b)}catch(g){}}c&&a.ajax({url:a.jqschedule.calendarurl,data:{search:true,stype:"complex",svalue:c,oper:"getEvent"},dataType:"json",type:"POST",success:function(i){a.jqschedule._filSearchTable(i)}});
d.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px")},editFromSearch:function(d){var c=a("tr#"+d+" td.source").html().split("~`"),b={};a.each(["id","title","start","end","description","location","className","access","allDay","user_id"],function(f){if(this=="start"||this=="end")c[f]=new Date(parseFloat(c[f])*1E3);if(this=="allDay")c[f]=c[f]=="1"?true:false;b[this]=c[f]});a.jqschedule._viewmode_=
true;a.jqschedule.eventEditDialog(b)},eventsFunc:function(d,c,b){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:d.getTime()/1E3,end:c.getTime()/1E3},success:function(f){b(f)}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(d){d=d.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#all_day",
a.jqschedule.eventid).click(function(){this.checked?a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));a("#b_search_cal").toggle(jQuery.jqschedule.showSearch,
jQuery.jqschedule.hideSearch);a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return false});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
